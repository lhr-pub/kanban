# å¤šäººåä½œçœ‹æ¿åº”ç”¨ ğŸš€

ä¸€ä¸ªç°ä»£åŒ–çš„å¤šç”¨æˆ·å®æ—¶åä½œçœ‹æ¿å·¥å…·ï¼Œä¸“ä¸ºå›¢é˜Ÿé¡¹ç›®ç®¡ç†è€Œè®¾è®¡ã€‚æ”¯æŒé¡¹ç›®/æˆå‘˜ç®¡ç†ã€é‚®ä»¶éªŒè¯ç™»å½•ã€å®æ—¶åä½œã€Trello å¼å¡ç»„ä¸å¡ç‰‡ã€ç¨³å®šçš„å†…è”ç¼–è¾‘ã€æ‹–æ‹½æ’åºã€å½’æ¡£ä¸å¯¼å…¥å¯¼å‡ºï¼Œä»¥åŠé¦–é¡µæ˜Ÿæ ‡çœ‹æ¿ä¸â€œé‚€è¯·ç®¡ç†â€ã€‚

## âœ¨ ä¸»è¦ç‰¹æ€§

### ğŸ¯ å®æ—¶åä½œä¸ç¼–è¾‘å ç”¨
- **å¤šäººåŒæ—¶ç¼–è¾‘**ï¼šåŒä¸€çœ‹æ¿å®æ—¶å¹¿æ’­æ›´æ”¹
- **åœ¨çº¿æˆå‘˜åˆ—è¡¨**ï¼šæ˜¾ç¤ºåœ¨çº¿ç”¨æˆ·
- **ç¼–è¾‘å ç”¨æç¤º**ï¼šæ­£åœ¨ç¼–è¾‘çš„å¡ç‰‡ä¼šæ˜¾ç¤ºå ç”¨æ ‡è®°

### ğŸ‘¥ è´¦å·ã€é‚®ä»¶ä¸æˆå‘˜/é‚€è¯·
- **é‚®ç®±éªŒè¯ç™»å½•**ï¼šæ³¨å†Œåå‘é€éªŒè¯é‚®ä»¶ï¼ˆæ”¯æŒè‡ªå®šä¹‰ SMTPï¼‰ï¼›æœªéªŒè¯é‚®ç®±ä¸èƒ½ç™»å½•
- **å¿˜è®°/é‡ç½®å¯†ç **ï¼šé‚®ä»¶é“¾æ¥è®¾ç½®æ–°å¯†ç ï¼ˆå¸¦ 60s é¢‘ç‡é™åˆ¶ï¼‰
- **é‚€è¯·ç®¡ç†ï¼ˆé¦–é¡µå¯¼èˆªï¼‰**ï¼š
  - æˆ‘æ”¶åˆ°çš„é‚€è¯·ï¼šæ¥å—/æ‹’ç»
  - å¾…æˆ‘å®¡æ‰¹çš„åŠ å…¥ç”³è¯·ï¼ˆé¡¹ç›®æ‰€æœ‰è€…ï¼‰ï¼šåŒæ„/æ‹’ç»ï¼ˆæ‰“å¼€å¼¹çª—åè‡ªåŠ¨ 3s è½®è¯¢ï¼‰
  - æ”¯æŒåœ¨å¼¹çª—å†…è¾“å…¥é‚€è¯·ç å‘èµ·åŠ å…¥ç”³è¯·
- **æˆå‘˜ç®¡ç†ï¼ˆé¡¹ç›®å†…ï¼‰**ï¼šæŸ¥çœ‹æˆå‘˜ã€ç§»é™¤æˆå‘˜ï¼ˆä»…æ‰€æœ‰è€…å¯ç§»é™¤ä»–äººï¼Œéæ‰€æœ‰è€…ä»…èƒ½ç§»é™¤è‡ªå·±ï¼‰
- **ä¸¥æ ¼æ‰€æœ‰æƒè§„åˆ™**ï¼š
  - ä»…é¡¹ç›®æ‰€æœ‰è€…å¯åˆ é™¤é¡¹ç›®
  - ä»…é¡¹ç›®æ‰€æœ‰è€…æˆ–çœ‹æ¿åˆ›å»ºè€…å¯åˆ é™¤/é‡å‘½åçœ‹æ¿
  - è¢«ç§»å‡ºé¡¹ç›®æ—¶å®¢æˆ·ç«¯è‡ªåŠ¨é€€å‡ºå¹¶è¿”å›é¦–é¡µ

### ğŸ—‚ï¸ é¡¹ç›®ä¸çœ‹æ¿
- **é¦–é¡µä¼˜å…ˆå±•ç¤ºé¡¹ç›®**ï¼Œå¹¶æä¾›å¿«é€Ÿè®¿é—®çœ‹æ¿åŒºä¸â€œæ˜Ÿæ ‡çœ‹æ¿â€åŒº
- **åˆ›å»º/é‡å‘½å/åˆ é™¤ é¡¹ç›®ä¸çœ‹æ¿**ï¼ˆéµå®ˆæ‰€æœ‰æƒè§„åˆ™ï¼‰
- **çœ‹æ¿åˆ‡æ¢å™¨ï¼ˆå¯¼èˆªæ æ ‡é¢˜å¯ç‚¹ï¼‰**ï¼š
  - ç‚¹å‡»çœ‹æ¿åæ˜¾ç¤ºä¸‹æ‹‰èœå•
  - æ”¯æŒæœç´¢ã€åˆ›å»ºçœ‹æ¿ï¼ˆä½¿ç”¨æœç´¢æ¡†æ–‡æœ¬ï¼‰ã€é‡å‘½åå½“å‰/å…¶ä»–çœ‹æ¿ã€å¿«é€Ÿåˆ‡æ¢
- **é¡¹ç›®åˆ›å»ºä¸å†é»˜è®¤ç”Ÿæˆçœ‹æ¿**ï¼Œé¡¹ç›®ä¸æœåŠ¡å™¨å‡èƒ½è‰¯å¥½å¤„ç†â€œæ— çœ‹æ¿â€çŠ¶æ€
- **çœ‹æ¿å½’æ¡£**ï¼šé¡¹ç›®çš„çœ‹æ¿æ”¯æŒå½’æ¡£/è¿˜åŸï¼›å½’æ¡£åˆ—è¡¨æ˜¾ç¤ºåœ¨é¡¹ç›®çš„â€œé€‰æ‹©çœ‹æ¿â€é¡µé¢ä¸‹æ–¹ï¼›å½’æ¡£åçš„çœ‹æ¿ä¸åœ¨é¦–é¡µ/é¡¹ç›®åˆ—è¡¨ä¸­å±•ç¤ºï¼Œä½†ä¸ä¼šåˆ é™¤æ•°æ®ï¼Œå¯éšæ—¶è¿˜åŸæˆ–åœ¨å½’æ¡£å¤„åˆ é™¤
- **ç§»åŠ¨çœ‹æ¿**ï¼šå¯å°†çœ‹æ¿åœ¨é¡¹ç›®é—´ç§»åŠ¨ï¼ˆå¸¦é¡¹ç›®é€‰æ‹©å™¨ä¸æœç´¢ï¼‰

### ğŸ§± Trello å¼å¡ç»„ï¼ˆListï¼‰
- **åŠ¨æ€å¡ç»„ï¼ˆå®¢æˆ·ç«¯ lists å…ƒæ•°æ®ï¼‰**ï¼šæ–°å¢/é‡å‘½å/åˆ é™¤ï¼Œé¡ºåºæŒä¹…åŒ–
- **å¡ç»„æ‹–æ‹½æ’åº**ï¼šåˆ—è¡¨å¤´/æ ‡é¢˜ä¸ºæ‰‹æŸ„ï¼›é‡Šæ”¾åä¿å­˜é¡ºåºï¼ˆå®¹å™¨å•ä¸€ `ondragover`ï¼‰
- **è®¾è®¡è§„èŒƒ**ï¼ˆè§ `public/style.css`ï¼‰ï¼šåˆ—å®½ `272px`ã€é—´è· `12px`ã€åˆ—èƒŒæ™¯ `#ebecf0`ï¼Œæ ·å¼ä½œç”¨åŸŸ `#boardPage`

### ğŸ“ å¡ç‰‡ï¼ˆCardï¼‰ä¸å†…è”ç¼–è¾‘
- **æ ‡é¢˜/æè¿°å†…è”ç¼–è¾‘**ï¼šå¤šè¡Œã€é”é«˜ä¸æŠ–åŠ¨ï¼›Esc å–æ¶ˆï¼›Ctrl/Cmd+Enter ä¿å­˜
- **è´Ÿè´£äººä¸æˆªæ­¢æ—¥æœŸ**ï¼šæ‚¬æµ®ä¸‹æ‹‰ä¸å›ºå®šå°ºå¯¸çš„æ—¥æœŸè¾“å…¥ï¼Œä¸æ”¹å˜å¸ƒå±€
- **è¯„è®º/å¸–å­ï¼ˆPostsï¼‰**ï¼šè¯¦æƒ…å¼¹çª—å†…åµŒè¯„è®ºåˆ—è¡¨ä¸è¾“å…¥æ¡†ï¼ˆæ»šåŠ¨å®¹å™¨ï¼‰ï¼›å¡ç‰‡æ­£é¢æ˜¾ç¤ºè¯„è®ºæ•°å¾½æ ‡ï¼›å¼¹çª—æ‰“å¼€æ—¶æ”¶åˆ°çœ‹æ¿æ›´æ–°ä¼šè‡ªåŠ¨åˆ·æ–°å¸–å­åˆ—è¡¨
- **å½’æ¡£**ï¼šå¡ç‰‡å¯å½’æ¡£/è¿˜åŸï¼›å½’æ¡£é¡µæ”¯æŒåˆ é™¤ï¼›çœ‹æ¿æ”¯æŒå½’æ¡£/è¿˜åŸï¼ˆé¡¹ç›®é¡µä¸‹æ–¹ï¼‰
- **å¿«é€Ÿæ·»åŠ **ï¼š
  - æ¯ä¸ªå¡ç»„åº•éƒ¨æœ‰â€œæ·»åŠ å¡ç‰‡â€composerï¼ˆEnter æäº¤ï¼ŒEsc å–æ¶ˆï¼‰
  - åœ¨åˆ—è¡¨ç©ºç™½å¤„æŒ‰ Enter å¯å¿«é€Ÿå±•å¼€ composer
  - æäº¤å composer ä¿æŒæ‰“å¼€ï¼Œä¾¿äºè¿ç»­æ·»åŠ 

### â†”ï¸ æ‹–æ‹½ä¸æ’åº
- **åˆ—å†…æ‹–æ‹½æ’åº**ï¼šæ‹–æ‹½å¡ç‰‡æ”¹å˜åŒåˆ—é¡ºåºå¹¶æŒä¹…åŒ–
- **è·¨åˆ—ç§»åŠ¨**ï¼šæ‹–æ‹½åˆ°å…¶ä»–åˆ—æ—¶å‘é€ç§»åŠ¨æ¶ˆæ¯å¹¶æ›´æ–°
- **å¡ç»„æ‹–æ‹½**ï¼šæ ‡é¢˜æ æ‰‹æŸ„æ–¹å¼ï¼›é‡Šæ”¾åä¿å­˜ lists é¡ºåºï¼ˆå®¹å™¨å•ä¸€ `ondragover`ï¼‰

### â¬†ï¸ å¯¼å…¥/å¯¼å‡ºä¸å¤‡ä»½
- **I/O èœå•**ï¼šå¯¼èˆªä¸Šçš„â€œå¯¼å…¥/å¯¼å‡ºâ€ä¸‹æ‹‰ï¼ˆå¯¼å…¥æ–‡ä»¶ã€ç²˜è´´æ–‡æœ¬å¯¼å…¥ã€å¯¼å‡º Markdown/JSONï¼‰
- **å¯¼å…¥ JSON/Markdown**ï¼šæ”¯æŒåˆå¹¶æˆ–è¦†ç›–ä¸¤ç§æ¨¡å¼ï¼›æ”¯æŒâ€œç²˜è´´æ–‡æœ¬å¯¼å…¥â€
- **å¯¼å‡º Markdown/JSON**ï¼šæ›´ç¨³å¥çš„ä¸‹è½½å…¼å®¹ç­–ç•¥
- **è‡ªåŠ¨å¤‡ä»½**ï¼šæ¯æ¬¡å†™å…¥åœ¨ `data/backups/` ç”Ÿæˆæ—¶é—´æˆ³ç‰ˆæœ¬ï¼Œä¿ç•™æœ€è¿‘ 50 ä»½

### â­ æ˜Ÿæ ‡çœ‹æ¿ï¼ˆæœåŠ¡å™¨æŒä¹…åŒ–ï¼‰
- æ˜Ÿæ ‡åˆ—è¡¨ä¸ºæ¯ä¸ªç”¨æˆ·æœåŠ¡å™¨æŒä¹…åŒ–ï¼ˆéæœ¬åœ°å­˜å‚¨ï¼‰
- é¦–é¡µä¸é¡¹ç›®é¡µçœ‹æ¿å¡ç‰‡æä¾›æ˜Ÿæ ‡æŒ‰é’®ï¼›é¡¶éƒ¨â€œæ˜Ÿæ ‡çœ‹æ¿â€åŒºæŒ‰æœ€è¿‘åŠ æ˜Ÿæ—¶é—´å€’åºå±•ç¤º
- é‡å‘½å/ç§»åŠ¨/åˆ é™¤çœ‹æ¿åä¼šåŒæ­¥æ›´æ–°æ˜Ÿæ ‡è®°å½•ï¼›è·¨é¡¹ç›®ç§»åŠ¨åæ˜Ÿæ ‡ä»ä¿ç•™

## ğŸ§­ ä½¿ç”¨æŒ‡å—

### è´¦å·ä¸é¡¹ç›®
1. æ³¨å†Œåå‰å¾€é‚®ç®±éªŒè¯ï¼Œå†ç™»å½•
2. é¦–é¡µåˆ›å»ºé¡¹ç›®ï¼Œæˆ–åœ¨â€œé‚€è¯·ç®¡ç†â€ä¸­è¾“å…¥é‚€è¯·ç å‘èµ·åŠ å…¥ç”³è¯·
3. è¿›å…¥é¡¹ç›®é€‰æ‹©çœ‹æ¿ï¼Œæˆ–åœ¨å¯¼èˆªæ ç‚¹å‡»çœ‹æ¿åæ‰“å¼€åˆ‡æ¢å™¨è¿›è¡Œåˆ‡æ¢/åˆ›å»º/é‡å‘½åï¼ˆä¸‹æ‹‰ä¸å±•ç¤ºå·²å½’æ¡£çœ‹æ¿ï¼‰

### çœ‹æ¿ä¸å¡ç‰‡
- æ¯ä¸ªå¡ç»„åº•éƒ¨æä¾›â€œæ·»åŠ å¡ç‰‡â€å…¥å£ï¼ˆç‚¹å‡»å±•å¼€ã€Enter æ·»åŠ ã€Esc å–æ¶ˆï¼‰ï¼Œåœ¨åˆ—è¡¨ç©ºç™½å¤„æŒ‰ Enter ä¹Ÿå¯å±•å¼€ï¼›æäº¤åä¿æŒæ‰“å¼€ä¾¿äºè¿ç»­æ·»åŠ 
- å¡ç‰‡æ­£é¢ï¼šæ ‡ç­¾ç‚¹ã€æ ‡é¢˜ã€å¾½æ ‡è¡Œï¼ˆæè¿°/è¯„è®º/æˆªæ­¢æ—¥æœŸ/è´Ÿè´£äººï¼‰
- ç‚¹å‡»å¡ç‰‡æ‰“å¼€è¯¦æƒ…æŠ½å±‰ï¼Œæˆ–ç‚¹å‡»æ ‡é¢˜/æè¿°è¿›å…¥å†…è”ç¼–è¾‘
- å½’æ¡£é¡µæ”¯æŒæœç´¢è¿‡æ»¤ï¼ˆæ ‡é¢˜/æè¿°/æ ‡ç­¾/è´Ÿè´£äººï¼‰

## ğŸ”Œ API å‚è€ƒï¼ˆæ‘˜è¦ï¼‰

### è®¤è¯ä¸é‚®ç®±
- POST `/api/register` { username, password, email }
- POST `/api/login` { username, password }ï¼ˆæ”¯æŒé‚®ç®±ç™»å½•ï¼‰
- GET `/api/verify?token=...` é‚®ç®±éªŒè¯å›è°ƒ
- POST `/api/resend-verification` { username }ï¼ˆ60s é¢‘ç‡é™åˆ¶ï¼‰
- POST `/api/forgot-password` { email? | username? }ï¼ˆ60s é¢‘ç‡é™åˆ¶ï¼‰
- POST `/api/reset-password` { token, newPassword }
- POST `/api/change-password` { username, oldPassword, newPassword }

### é¡¹ç›®ä¸çœ‹æ¿
- GET `/api/user-projects/:username`
- POST `/api/create-project` { username, projectName }
- POST `/api/rename-project` { projectId, newName }
- DELETE `/api/delete-project` { projectId, actor }
- GET `/api/project-boards/:projectId` â†’ { inviteCode, members, boards, owner, boardOwners, archivedBoards }
- POST `/api/create-board` { projectId, boardName, actor }
- POST `/api/rename-board` { projectId, oldName, newName, actor }
- POST `/api/archive-board` { projectId, boardName, actor }
- POST `/api/unarchive-board` { projectId, boardName, actor }
- POST `/api/move-board` { fromProjectId, toProjectId, boardName, actor }
- DELETE `/api/delete-board` { projectId, boardName, actor }
- GET `/api/board/:projectId/:boardName`
- GET `/api/export/:projectId/:boardName` â†’ Markdown ä¸‹è½½
- GET `/api/export-json/:projectId/:boardName` â†’ JSON ä¸‹è½½

### æˆå‘˜ä¸é‚€è¯·
- GET `/api/user-invites/:username`
- POST `/api/accept-invite` { username, projectId }
- POST `/api/decline-invite` { username, projectId }
- GET `/api/user-approvals/:username`
- GET `/api/join-requests/:projectId`
- POST `/api/join-project` { username, inviteCode }
- POST `/api/approve-join` { projectId, username, actor }
- POST `/api/deny-join` { projectId, username, actor }
- POST `/api/remove-project-member` { projectId, username, actor }
- POST `/api/regenerate-invite-code` { projectId, actor }

### æ˜Ÿæ ‡
- GET `/api/user-stars/:username` â†’ { stars }
- POST `/api/user-stars/toggle` { username, projectId, boardName, projectName } â†’ { stars, starred }

### ç®¡ç†å‘˜
- POST `/api/admin/login` { username, password }
- POST `/api/admin/logout` Bearer token
- GET `/api/admin/users` Bearer token
- PATCH `/api/admin/users/:username` { verified?, admin?, password? } Bearer token
- DELETE `/api/admin/users/:username` Bearer tokenï¼ˆè‹¥ç”¨æˆ·æ˜¯ä»»ä¸€é¡¹ç›®æ‰€æœ‰è€…å°†è¢«é˜»æ­¢ï¼‰

> æ³¨ï¼šå®¢æˆ·ç«¯é€šè¿‡ WebSocket åŒæ­¥çœ‹æ¿å˜æ›´ï¼›å½’æ¡£çœ‹æ¿ä¸ä¼šå‡ºç°åœ¨é¦–é¡µ/é¡¹ç›®çœ‹æ¿åˆ—è¡¨ä¸­ï¼ˆå¯åœ¨é¡¹ç›®é¡µåº•éƒ¨å±•å¼€â€œå½’æ¡£çš„çœ‹æ¿â€å¹¶æœç´¢ã€è¿˜åŸæˆ–åˆ é™¤ï¼‰ã€‚

## ğŸŒ WebSocket æ¶ˆæ¯ï¼ˆå…³é”®ç±»å‹ï¼‰
- `join` åŠ å…¥çœ‹æ¿
- `board-update` çœ‹æ¿æ•°æ®æ›´æ–°ï¼ˆå« lists å…ƒä¿¡æ¯ä¸å„åˆ—å¡ç‰‡ï¼‰
- `user-list` åœ¨çº¿ç”¨æˆ·æ›´æ–°
- `card-editing` æŸå¡ç‰‡è¢«ç”¨æˆ·ç¼–è¾‘/é‡Šæ”¾
- `add-card` / `update-card` / `delete-card`
- `move-card` / `reorder-cards`
- `archive-card` / `restore-card` / `clear-archive`
- `save-lists` ä¿å­˜å¡ç»„å…ƒä¿¡æ¯ï¼ˆæ–°å¢/é‡å‘½å/åˆ é™¤/æ’åºï¼‰
- `import-board` å¯¼å…¥æ•°æ®ï¼ˆmerge/overwriteï¼‰
- `project-renamed` / `board-renamed` / `board-moved` / `project-deleted` / `member-removed` / `member-added` / `join-request` / `import-success` / `error`

## â±ï¸ é¢‘ç‡é™åˆ¶
- é‡æ–°å‘é€éªŒè¯é‚®ä»¶ï¼šåŒä¸€ç”¨æˆ· 60s ä¸€æ¬¡
- å¿˜è®°å¯†ç é‚®ä»¶ï¼šåŒä¸€ç”¨æˆ· 60s ä¸€æ¬¡

## UI ç»„ä»¶
- `uiToast(type: info|success|error)`ï¼šä¿¡æ¯/æˆåŠŸ/é”™è¯¯æç¤ºï¼ˆè‡ªåŠ¨æ¶ˆå¤±ï¼‰
- `uiConfirm(title, message)`ï¼šç¡®è®¤å¯¹è¯æ¡†ï¼ˆEnter ç¡®è®¤ã€Esc å–æ¶ˆï¼‰
- `uiPrompt(title, default)`ï¼šè¾“å…¥å¯¹è¯æ¡†ï¼ˆEnter æäº¤ã€Esc å–æ¶ˆï¼›IME ç»„åˆè¾“å…¥å®‰å…¨ï¼‰
- å¯†ç å¼¹çª—ï¼šä¿®æ”¹/é‡ç½®å¯†ç æ—¶ç»Ÿä¸€å¤„ç† Enter/Escï¼ˆæ•è·é˜¶æ®µé˜»æ­¢å†’æ³¡ï¼‰
- I/O èœå•ï¼šå¯¼å…¥æ–‡ä»¶/æ–‡æœ¬ã€å¯¼å‡º Markdown/JSON
- é¡¹ç›®é€‰æ‹©å™¨ï¼šç§»åŠ¨çœ‹æ¿æ—¶é€‰æ‹©ç›®æ ‡é¡¹ç›®ï¼ˆæ”¯æŒæœç´¢ï¼‰

## ğŸ“ é¡¹ç›®ç»“æ„

```
kanban/
â”œâ”€â”€ public/                 # å‰ç«¯èµ„æºï¼ˆVanilla JSï¼‰
â”‚   â”œâ”€â”€ index.html          # å•é¡µåº”ç”¨
â”‚   â”œâ”€â”€ app.js              # ä¸»è¦å‰ç«¯é€»è¾‘ï¼ˆWSã€å†…è”ç¼–è¾‘ã€æ‹–æ‹½ã€é‚€è¯·/æˆå‘˜/æ˜Ÿæ ‡/åˆ‡æ¢å™¨ç­‰ï¼‰
â”‚   â”œâ”€â”€ style.css           # Trello é£æ ¼ä¸å¸ƒå±€ã€å†…è”ç¼–è¾‘ç¨³å®šæ€§æ ·å¼
â”‚   â”œâ”€â”€ admin.html, admin.js# ç®¡ç†å‘˜é¡µé¢ï¼ˆç‹¬ç«‹ï¼‰
â”‚   â””â”€â”€ ...
â”œâ”€â”€ server.js               # Node.js + Express + ws æœåŠ¡ç«¯ï¼ˆå« SMTP é‚®ä»¶ï¼‰
â”œâ”€â”€ data/                   # æ–‡ä»¶å‹ JSON å­˜å‚¨ä¸å¤‡ä»½
â”‚   â”œâ”€â”€ users.json
â”‚   â”œâ”€â”€ projects.json
â”‚   â”œâ”€â”€ {projectId}_{board}.json
â”‚   â””â”€â”€ backups/
â”œâ”€â”€ web/                    # å‰ç«¯é‡æ„ï¼ˆReact + TypeScript + Viteï¼Œè¿›è¡Œä¸­ï¼‰
â”œâ”€â”€ Dockerfile              # å®¹å™¨é•œåƒï¼ˆç”Ÿäº§ï¼‰
â”œâ”€â”€ docker-compose.dev.yml  # æœ¬åœ°å¼€å‘ï¼ˆOrbStack/volumeï¼‰
â”œâ”€â”€ docker-compose.prod.yml # æœåŠ¡å™¨éƒ¨ç½²ï¼ˆæŒä¹…åŒ–æ•°æ®å·ï¼‰
â”œâ”€â”€ docker-compose.prod.build.yml # æœåŠ¡å™¨ä¸Šæ„å»ºé•œåƒ
â”œâ”€â”€ postcss.config.cjs      # CSS æ„å»ºç®¡çº¿
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

### 1) å®‰è£…ä¾èµ–
```bash
npm install
```

### 2) é…ç½®ç¯å¢ƒå˜é‡
å¤åˆ¶ `.env.example` ä¸º `.env` å¹¶æŒ‰éœ€ä¿®æ”¹ï¼š
```env
PORT=3000
NODE_ENV=development
BASE_URL=http://localhost:3000

# SMTPï¼ˆç”¨äºé‚®ä»¶éªŒè¯ä¸é‡ç½®å¯†ç ï¼‰
SMTP_HOST=
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=
SMTP_PASS=
MAIL_FROM=
# å¼€å‘å¯ä½¿ç”¨ Ethereal é¢„è§ˆé‚®ç®±ï¼ˆéç”Ÿäº§æŠ•é€’ï¼‰
USE_ETHEREAL=true

# ç®¡ç†å‘˜å¯åŠ¨å¼•å¯¼ï¼ˆé¦–æ¬¡è¿è¡Œè‡ªåŠ¨åˆ›å»º/æå‡ï¼‰
ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin123
ADMIN_EMAIL=
```

### 3) å¯åŠ¨æœåŠ¡
```bash
npm start
# æˆ–ä¸´æ—¶æŒ‡å®šç«¯å£
PORT=3001 node server.js
```
è®¿é—® `http://localhost:3000`

## ğŸ³ ä½¿ç”¨ Dockerï¼ˆå¯é€‰ï¼‰
- å¼€å‘ï¼ˆæœ¬æœºè°ƒè¯•ã€æŒ‚è½½ä»£ç å·ï¼‰
```bash
docker compose -f docker-compose.dev.yml up -d
```
  - ç«¯å£æ˜ å°„ï¼š`3000:3000`
  - æŒ‚è½½ï¼š`./data:/app/data`ï¼ˆæŒä¹…æ•°æ®ï¼‰ã€`./public:/app/public`ï¼ˆé™æ€èµ„æºçƒ­è°ƒè¯•ï¼‰ã€`./server.js:/app/server.js`ï¼ˆéœ€æ‰‹åŠ¨é‡å¯ï¼‰ã€`./index.html`ã€`./kanban.js`ã€`./markdown.js`
- ç”Ÿäº§ï¼ˆæœåŠ¡å™¨éƒ¨ç½²ï¼‰
  - åœ¨æœåŠ¡å™¨ä¸Šæ„å»ºé•œåƒï¼š
```bash
docker compose -f docker-compose.prod.build.yml build
```
  - ä»¥æŒä¹…åŒ–æ•°æ®å·è¿è¡Œï¼š
```bash
docker compose -f docker-compose.prod.yml up -d
```
  - ç«¯å£æ˜ å°„ï¼š`3000:3000`ï¼›å‘½åå·ï¼š`kanban_data:/app/data`
- `.dockerignore` ç”¨äºæ’é™¤ä¸åº”è¿›å…¥é•œåƒçš„æ–‡ä»¶

## ğŸ” ç®¡ç†å‘˜æ§åˆ¶å°
- è®¿é—®ï¼š`/admin`
- ç™»å½•ï¼šä½¿ç”¨ç®¡ç†å‘˜è´¦å·å¯†ç ï¼ˆé¦–æ¬¡è¿è¡Œå¯é€šè¿‡ `.env` ä¸­ `ADMIN_*` å¼•å¯¼åˆ›å»º/æå‡ï¼‰
- åŠŸèƒ½ï¼š
  - åˆ—å‡ºç”¨æˆ·ï¼ˆé‚®ç®±/æ˜¯å¦éªŒè¯/æ˜¯å¦ç®¡ç†å‘˜/é¡¹ç›®æ•°/åˆ›å»ºæ—¶é—´ï¼‰
  - åˆ‡æ¢é‚®ç®±éªŒè¯çŠ¶æ€ã€åˆ‡æ¢ç®¡ç†å‘˜ã€é‡ç½®å¯†ç 
  - åˆ é™¤ç”¨æˆ·ï¼ˆå¦‚ç”¨æˆ·æ˜¯ä»»ä¸€é¡¹ç›®æ‰€æœ‰è€…å°†è¢«é˜»æ­¢ï¼‰

## ğŸ”§ æŠ€æœ¯æ ˆ
- å‰ç«¯ï¼šåŸç”Ÿ JavaScript + HTML + CSSï¼ˆè¿›è¡Œä¸­çš„ `web/` ç›®å½•ä¸º React + TypeScript + Vite é‡æ„ï¼‰
- æ ·å¼æ„å»ºï¼šPostCSSï¼ˆimport/autoprefixer/cssnano/purgecssï¼‰
- åç«¯ï¼šNode.js + Express
- å®æ—¶ï¼šWebSocketï¼ˆwsï¼‰
- å­˜å‚¨ï¼šæ–‡ä»¶å‹ JSONï¼ˆå¯ç›´æ¥æŸ¥çœ‹/å¤‡ä»½/ç‰ˆæœ¬åŒ–ï¼‰
- é‚®ä»¶ï¼šnodemailerï¼ˆæ”¯æŒè‡ªå®šä¹‰ SMTP æˆ– Ethereal é¢„è§ˆï¼‰
- é…ç½®ï¼šdotenv

## ğŸ§­ ä½¿ç”¨æŒ‡å—

### è´¦å·ä¸é¡¹ç›®
1. æ³¨å†Œåå‰å¾€é‚®ç®±éªŒè¯ï¼Œå†ç™»å½•
2. é¦–é¡µåˆ›å»ºé¡¹ç›®ï¼Œæˆ–åœ¨â€œé‚€è¯·ç®¡ç†â€ä¸­è¾“å…¥é‚€è¯·ç å‘èµ·åŠ å…¥ç”³è¯·
3. è¿›å…¥é¡¹ç›®é€‰æ‹©çœ‹æ¿ï¼Œæˆ–åœ¨å¯¼èˆªæ ç‚¹å‡»çœ‹æ¿åæ‰“å¼€åˆ‡æ¢å™¨è¿›è¡Œåˆ‡æ¢/åˆ›å»º/é‡å‘½åï¼ˆä¸‹æ‹‰ä¸å±•ç¤ºå·²å½’æ¡£çœ‹æ¿ï¼‰

### çœ‹æ¿ä¸å¡ç‰‡
- æ¯ä¸ªå¡ç»„åº•éƒ¨æä¾›â€œæ·»åŠ å¡ç‰‡â€å…¥å£ï¼ˆç‚¹å‡»å±•å¼€ã€Enter æ·»åŠ ã€Esc å–æ¶ˆï¼‰ï¼Œåœ¨åˆ—è¡¨ç©ºç™½å¤„æŒ‰ Enter ä¹Ÿå¯å±•å¼€ï¼›æäº¤åä¿æŒæ‰“å¼€ä¾¿äºè¿ç»­æ·»åŠ 
- å¡ç‰‡æ­£é¢ï¼šæ ‡ç­¾ç‚¹ã€æ ‡é¢˜ã€å¾½æ ‡è¡Œï¼ˆæè¿°/è¯„è®º/æˆªæ­¢æ—¥æœŸ/è´Ÿè´£äººï¼‰
- ç‚¹å‡»å¡ç‰‡æ‰“å¼€è¯¦æƒ…æŠ½å±‰ï¼Œæˆ–ç‚¹å‡»æ ‡é¢˜/æè¿°è¿›å…¥å†…è”ç¼–è¾‘
- å½’æ¡£é¡µæ”¯æŒæœç´¢è¿‡æ»¤ï¼ˆæ ‡é¢˜/æè¿°/æ ‡ç­¾/è´Ÿè´£äººï¼‰

## ğŸ”Œ API å‚è€ƒï¼ˆæ‘˜è¦ï¼‰

### è®¤è¯ä¸é‚®ç®±
- POST `/api/register` { username, password, email }
- POST `/api/login` { username, password }ï¼ˆæ”¯æŒé‚®ç®±ç™»å½•ï¼‰
- GET `/api/verify?token=...` é‚®ç®±éªŒè¯å›è°ƒ
- POST `/api/resend-verification` { username }ï¼ˆ60s é¢‘ç‡é™åˆ¶ï¼‰
- POST `/api/forgot-password` { email? | username? }ï¼ˆ60s é¢‘ç‡é™åˆ¶ï¼‰
- POST `/api/reset-password` { token, newPassword }
- POST `/api/change-password` { username, oldPassword, newPassword }

### é¡¹ç›®ä¸çœ‹æ¿
- GET `/api/user-projects/:username`
- POST `/api/create-project` { username, projectName }
- POST `/api/rename-project` { projectId, newName }
- DELETE `/api/delete-project` { projectId, actor }
- GET `/api/project-boards/:projectId` â†’ { inviteCode, members, boards, owner, boardOwners, archivedBoards }
- POST `/api/create-board` { projectId, boardName, actor }
- POST `/api/rename-board` { projectId, oldName, newName, actor }
- POST `/api/archive-board` { projectId, boardName, actor }
- POST `/api/unarchive-board` { projectId, boardName, actor }
- POST `/api/move-board` { fromProjectId, toProjectId, boardName, actor }
- DELETE `/api/delete-board` { projectId, boardName, actor }
- GET `/api/board/:projectId/:boardName`
- GET `/api/export/:projectId/:boardName` â†’ Markdown ä¸‹è½½
- GET `/api/export-json/:projectId/:boardName` â†’ JSON ä¸‹è½½

### æˆå‘˜ä¸é‚€è¯·
- GET `/api/user-invites/:username`
- POST `/api/accept-invite` { username, projectId }
- POST `/api/decline-invite` { username, projectId }
- GET `/api/user-approvals/:username`
- GET `/api/join-requests/:projectId`
- POST `/api/join-project` { username, inviteCode }
- POST `/api/approve-join` { projectId, username, actor }
- POST `/api/deny-join` { projectId, username, actor }
- POST `/api/remove-project-member` { projectId, username, actor }
- POST `/api/regenerate-invite-code` { projectId, actor }

### æ˜Ÿæ ‡
- GET `/api/user-stars/:username` â†’ { stars }
- POST `/api/user-stars/toggle` { username, projectId, boardName, projectName } â†’ { stars, starred }

### ç®¡ç†å‘˜
- POST `/api/admin/login` { username, password }
- POST `/api/admin/logout` Bearer token
- GET `/api/admin/users` Bearer token
- PATCH `/api/admin/users/:username` { verified?, admin?, password? } Bearer token
- DELETE `/api/admin/users/:username` Bearer tokenï¼ˆè‹¥ç”¨æˆ·æ˜¯ä»»ä¸€é¡¹ç›®æ‰€æœ‰è€…å°†è¢«é˜»æ­¢ï¼‰

> æ³¨ï¼šå®¢æˆ·ç«¯é€šè¿‡ WebSocket åŒæ­¥çœ‹æ¿å˜æ›´ï¼›å½’æ¡£çœ‹æ¿ä¸ä¼šå‡ºç°åœ¨é¦–é¡µ/é¡¹ç›®çœ‹æ¿åˆ—è¡¨ä¸­ï¼ˆå¯åœ¨é¡¹ç›®é¡µåº•éƒ¨å±•å¼€â€œå½’æ¡£çš„çœ‹æ¿â€å¹¶æœç´¢ã€è¿˜åŸæˆ–åˆ é™¤ï¼‰ã€‚

## ğŸŒ WebSocket æ¶ˆæ¯ï¼ˆå…³é”®ç±»å‹ï¼‰
- `join` åŠ å…¥çœ‹æ¿
- `board-update` çœ‹æ¿æ•°æ®æ›´æ–°ï¼ˆå« lists å…ƒä¿¡æ¯ä¸å„åˆ—å¡ç‰‡ï¼‰
- `user-list` åœ¨çº¿ç”¨æˆ·æ›´æ–°
- `card-editing` æŸå¡ç‰‡è¢«ç”¨æˆ·ç¼–è¾‘/é‡Šæ”¾
- `add-card` / `update-card` / `delete-card`
- `move-card` / `reorder-cards`
- `archive-card` / `restore-card` / `clear-archive`
- `save-lists` ä¿å­˜å¡ç»„å…ƒä¿¡æ¯ï¼ˆæ–°å¢/é‡å‘½å/åˆ é™¤/æ’åºï¼‰
- `import-board` å¯¼å…¥æ•°æ®ï¼ˆmerge/overwriteï¼‰
- `project-renamed` / `board-renamed` / `board-moved` / `project-deleted` / `member-removed` / `member-added` / `join-request` / `import-success` / `error`

## ğŸ—ƒï¸ æ•°æ®æ¨¡å‹ï¼ˆè¦ç‚¹ï¼‰

### projects.jsonï¼ˆç¤ºæ„ï¼‰
```json
{
  "pid123": {
    "name": "é¡¹ç›®A",
    "inviteCode": "ABC123",
    "owner": "alice",
    "created": "2024-01-01T00:00:00.000Z",
    "members": ["alice", "bob"],
    "boards": ["é»˜è®¤çœ‹æ¿", "è¿­ä»£ä¸€"],
    "boardOwners": { "é»˜è®¤çœ‹æ¿": "alice" },
    "pendingRequests": []
  }
}
```

### {projectId}_{board}.jsonï¼ˆç¤ºæ„ï¼‰
```json
{
  "todo": [],
  "doing": [],
  "done": [],
  "archived": [],
  "lists": {
    "listIds": ["todo", "doing", "done"],
    "lists": {
      "todo": { "id": "todo", "title": "å¾…åŠ", "pos": 0, "status": "todo" },
      "doing": { "id": "doing", "title": "è¿›è¡Œä¸­", "pos": 1, "status": "doing" },
      "done": { "id": "done", "title": "å·²å®Œæˆ", "pos": 2, "status": "done" }
    }
  }
}
```

### å¡ç‰‡ï¼ˆå¯èƒ½åŒ…å«çš„å¯é€‰å­—æ®µï¼‰
- `labels: string[]`
- `checklist?: { items?: {text:string,done:boolean}[], done:number, total:number }`
- `commentsCount?: number`
- `attachmentsCount?: number`
- `priority?: "low"|"med"|"high"`
- `posts?: { id:string, author:string, text:string, created:string, edited?:string }[]`

## â±ï¸ é¢‘ç‡é™åˆ¶
- é‡æ–°å‘é€éªŒè¯é‚®ä»¶ï¼šåŒä¸€ç”¨æˆ· 60s ä¸€æ¬¡
- å¿˜è®°å¯†ç é‚®ä»¶ï¼šåŒä¸€ç”¨æˆ· 60s ä¸€æ¬¡

## ğŸ’¾ å¤‡ä»½ç­–ç•¥
- æ¯æ¬¡æ•°æ®å†™å…¥éƒ½ä¼šåœ¨ `data/backups/` ç”Ÿæˆæ—¶é—´æˆ³å¤‡ä»½æ–‡ä»¶
- æ–‡ä»¶åï¼š`{projectId}_{boardName}_{ISOæ—¶é—´}.json`
- å®šæ—¶æ¸…ç†ï¼šä»…ä¿ç•™æœ€è¿‘ 50 ä»½

## ğŸ“ é¡¹ç›®è§„èŒƒï¼ˆProject Standardsï¼‰

### è¿è¡Œä¸ç«¯å£
- æœ¬åœ°å¯åŠ¨ï¼š`npm start`ï¼ˆè‡ªåŠ¨åŠ è½½ `.env`ï¼‰
- ä¹Ÿå¯ï¼š`node server.js` æˆ– `PORT=xxxx node server.js`

### Git æµç¨‹
- æäº¤ä¿¡æ¯ï¼šç®€æ˜æ¸…æ™°ï¼Œè¯´æ˜åŠ¨æœºä¸å½±å“ï¼ˆç¤ºä¾‹ï¼š`fix/ui: ç¨³å®šå†…è”ç¼–è¾‘å®½åº¦ï¼Œå»é™¤å³ä¾§é—´è·`ï¼‰
- è¯·å‹¿æäº¤æœ¬åœ°ä¸ªæ€§åŒ–è®¾ç½®æ–‡ä»¶ï¼ˆå¦‚ `.env`ã€`.claude/settings.local.json`ï¼‰
- åˆ†æ”¯å‘½åï¼šåŠŸèƒ½ `feature/<name>`ï¼Œä¿®å¤ `fix/<name>`

### å‰ç«¯æ ·å¼ä¸äº¤äº’
- ä¿æŒ 4 ç©ºæ ¼ç¼©è¿›
- Trello é£æ ¼ï¼š
  - è®¾è®¡ä»¤ç‰Œå®šä¹‰åœ¨æ ¹/ä½œç”¨åŸŸä¸‹ï¼Œæ‰€æœ‰è¦†ç›–é›†ä¸­åˆ°æ ·å¼æœ«å°¾
  - åˆ—å®½ `272px`ã€é—´è· `12px`ã€èƒŒæ™¯ `#ebecf0`
  - çœ‹æ¿é¡µé¢æ ·å¼ä½œç”¨åŸŸä¸º `#boardPage`
- å†…è”ç¼–è¾‘ç¨³å®šæ€§ï¼š
  - æ ‡é¢˜/æè¿°ç¼–è¾‘å™¨ç»å¯¹å®šä½è¦†ç›–åŸæ–‡æœ¬ï¼Œå®¹å™¨ `position: relative` é”é«˜
  - æ—¥æœŸ/è´Ÿè´£äººç¼–è¾‘é‡‡ç”¨æµ®å±‚æˆ–å›ºå®šå®½é«˜è¾“å…¥ï¼Œé¿å…å¸ƒå±€æŠ–åŠ¨
- åˆ—ä¸å¡ç‰‡æ‹–æ‹½ï¼šé¿å…é‡å¤ç»‘å®šï¼›å®¹å™¨ä½¿ç”¨å•ä¸€ `ondragover` å¤„ç†

### UI ç»„ä»¶
- `uiToast(type: info|success|error)`ï¼šä¿¡æ¯/æˆåŠŸ/é”™è¯¯æç¤ºï¼ˆè‡ªåŠ¨æ¶ˆå¤±ï¼‰
- `uiConfirm(title, message)`ï¼šç¡®è®¤å¯¹è¯æ¡†ï¼ˆEnter ç¡®è®¤ã€Esc å–æ¶ˆï¼‰
- `uiPrompt(title, default)`ï¼šè¾“å…¥å¯¹è¯æ¡†ï¼ˆEnter æäº¤ã€Esc å–æ¶ˆï¼›IME ç»„åˆè¾“å…¥å®‰å…¨ï¼‰
- å¯†ç å¼¹çª—ï¼šä¿®æ”¹/é‡ç½®å¯†ç æ—¶ç»Ÿä¸€å¤„ç† Enter/Escï¼ˆæ•è·é˜¶æ®µé˜»æ­¢å†’æ³¡ï¼‰
- I/O èœå•ï¼šå¯¼å…¥æ–‡ä»¶/æ–‡æœ¬ã€å¯¼å‡º Markdown/JSON
- é¡¹ç›®é€‰æ‹©å™¨ï¼šç§»åŠ¨çœ‹æ¿æ—¶é€‰æ‹©ç›®æ ‡é¡¹ç›®ï¼ˆæ”¯æŒæœç´¢ï¼‰

## ğŸ¤ è´¡çŒ®
- æ¬¢è¿æäº¤ Issue ä¸ PR æ”¹è¿›é¡¹ç›®
- å»ºè®®æ–°å¢ `CONTRIBUTING.md` çº¦å®šç¼–ç è§„èŒƒä¸æäº¤è§„èŒƒ

## ğŸ“„ è®¸å¯
MIT