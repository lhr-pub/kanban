/*
====================================================================
 CSS Structure Index (search for SECTION tags)
====================================================================
 1) SECTION: Variables & Resets
 2) SECTION: Layout & Containers
 3) SECTION: Headers & Breadcrumbs
 4) SECTION: Pages
    - Project Page Header
    - Board Select Header
    - Board Page Header
    - Archive Page Header
 5) SECTION: Components
    - Cards & Lists (Kanban)
    - Project/Board Cards (homepage / project page)
    - Actions Menus / Switchers
 6) SECTION: Grids (archived boards, tools)
 7) SECTION: Buttons & Utilities
 8) SECTION: Dark Mode Overrides
 9) SECTION: Responsive

 Tips:
 - Keep page-specific overrides near the bottom of that page's section.
 - Prefer component-level styles over page overrides when possible.
 - Use neutral tokens from :root variables.
====================================================================
*/

/* SECTION: Variables & Resets */
/* CSS Variables for consistent theming */
:root {
    --primary-color: #3b82f6;
    --primary-dark: #2563eb;
    --primary-light: #60a5fa;
    --success-color: #10b981;
    --success-dark: #059669;
    --warning-color: #f59e0b;
    --danger-color: #ef4444;
    --danger-dark: #dc2626;
    --gray-50: #f9fafb;
    --gray-100: #f3f4f6;
    --gray-200: #e5e7eb;
    --gray-300: #d1d5db;
    --gray-400: #9ca3af;
    --gray-500: #6b7280;
    --gray-600: #4b5563;
    --gray-700: #374151;
    --gray-800: #1f2937;
    --gray-900: #111827;
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    --border-radius-sm: 4px;
    --border-radius: 6px;
    --border-radius-lg: 8px;
    --border-radius-xl: 12px;
    --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);

    /* 统一的编辑区域变量 - 去掉左右边距 */
    --text-area-left: 0px;
    --text-area-right: 0px;
    --text-area-width: 100%;

    /* 待办列的变量（没有左侧按钮） */
    --text-area-todo-left: 0px;
    --text-area-todo-width: calc(100% - var(--text-area-todo-left) - var(--text-area-right));

    /* === Trello-like refinements (phase 2) === */
    --board-bg-url: none; /* e.g., url('https://images.unsplash.com/photo-...') */

    /* === Trello design tokens & minimal card UI === */
    --list-width:272px;
    --list-gap:12px;
    --card-radius:10px;
    --card-padding:10px;
    --card-shadow:0 1px 0 rgba(9,30,66,.25);
    --card-hover-shadow:0 4px 8px rgba(9,30,66,.25);
    --badge-gap:6px;
    --label-height:8px;
    --muted:#6b7280;
    --border:#e5e7eb;
    --bg:#f6f7f9;
    --card-bg:#fff;
    /* Page-level gutter used by project page containers */
    --page-gutter: 2rem;
}

/* 全局样式 */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    color: var(--gray-800);
    width: 100%;
    min-height: 100vh;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* 自定义滚动条样式 */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: var(--gray-100);
    border-radius: var(--border-radius-sm);
}

::-webkit-scrollbar-thumb {
    background: var(--gray-300);
    border-radius: var(--border-radius-sm);
    transition: var(--transition);
}

::-webkit-scrollbar-thumb:hover {
    background: var(--gray-400);
}

/* Firefox滚动条 */
html {
    scrollbar-width: thin;
    scrollbar-color: var(--gray-300) var(--gray-100);
}

/* 通用聚焦样式 */
*:focus {
    outline: 2px solid transparent;
    outline-offset: 2px;
}

*:focus-visible {
    outline: 2px solid var(--primary-color);
    outline-offset: 2px;
    border-radius: var(--border-radius-sm);
}

/* 改善点击目标和触摸友好性 */
.clickable {
    cursor: pointer;
    position: relative;
    transition: var(--transition);
}

.clickable::after {
    content: '';
    position: absolute;
    top: -4px;
    left: -4px;
    right: -4px;
    bottom: -4px;
    min-width: 44px;
    min-height: 44px;
    pointer-events: none;
}

/* 页面切换 */
.page {
    min-height: 100vh;
    width: 100%;
}

.hidden {
    display: none !important;
}

/* 页面容器 */
.container {
    width: 100%;
    padding: 2rem;
    max-width: 1400px;
    margin: 0 auto;
}

/* 登录页面特殊样式 */
#loginPage .container {
    max-width: 420px;
    margin: 0 auto;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-radius: var(--border-radius-xl);
    box-shadow: var(--shadow-lg);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

#loginPage {
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

h1 {
    text-align: center;
    margin-bottom: 1.5rem;
    color: var(--primary-color);
    font-weight: 700;
    font-size: 1.875rem;
    letter-spacing: -0.025em;
}

.login-form h2 {
    margin-bottom: 1rem;
    color: var(--gray-700);
    font-weight: 600;
    font-size: 1.25rem;
}

.login-form input {
    width: 100%;
    padding: 0.875rem 1rem;
    margin-bottom: 1rem;
    border: 2px solid var(--gray-200);
    border-radius: var(--border-radius-lg);
    font-size: 1rem;
    transition: var(--transition);
    background: var(--gray-50);
    font-weight: 400;
}

.login-form input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    background: white;
    transform: translateY(-1px);
}

.login-form input::placeholder {
    color: var(--gray-400);
}

.login-form button {
    width: 100%;
    padding: 0.875rem 1rem;
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
    color: white;
    border: none;
    border-radius: var(--border-radius-lg);
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition);
    box-shadow: var(--shadow-sm);
}

.login-form button:hover {
    background: linear-gradient(135deg, var(--primary-dark) 0%, #1e40af 100%);
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

.login-form button:active {
    transform: translateY(0);
    box-shadow: var(--shadow-sm);
}

.login-form p {
    text-align: center;
    margin-top: 1rem;
    color: #6b7280;
}

.login-form a {
    color: #2563eb;
    text-decoration: none;
}

.login-form a:hover {
    text-decoration: underline;
}

/* 看板页面 */
#boardPage {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    align-items: stretch;
    justify-content: stretch;
    background-image: var(--board-bg-url);
    background-position: center center;
    background-size: cover;
    background-repeat: no-repeat;
    background-attachment: fixed;
}

.header {
    background: white;
    padding: 1rem 2rem;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 1rem;
}

.header-actions {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex-wrap: wrap;
}

.online-users {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: #f0fdf4;
    border: 1px solid #bbf7d0;
    border-radius: 6px;
    font-size: 0.875rem;
}

#userList {
    display: flex;
    gap: 0.25rem;
}

.user-badge {
    background: #10b981;
    color: white;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.75rem;
}

.header button {
    padding: 0.5rem 1rem;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.875rem;
    transition: all 0.2s;
}

#exportBtn {
    background: #059669;
    color: white;
}

#exportBtn:hover {
    background: #047857;
}

#logoutBtn {
    background: #dc2626;
    color: white;
}

#logoutBtn:hover {
    background: #b91c1c;
}

/* 看板容器 */
.board-container {
    flex: 1;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.25rem;
    padding: 1.5rem 2rem;
    overflow-x: auto;
    max-width: none;
    width: 100%;
    justify-content: flex-start !important;
}

/* 归档页面样式 */
.archive-container {
    flex: 1;
    padding: 1.5rem;
    max-width: 600px;
    margin: 0 auto;
}

.archive-column {
    background: white;
    border-radius: 8px;
    padding: 1rem;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    border: 2px dashed #d1d5db;
    background: #f9fafb;
}

.archive-column h3 {
    color: #6b7280;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #e5e7eb;
    font-size: 1.125rem;
}

.archive-column .cards {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.archive-column .card {
    opacity: 0.8;
    background: #f3f4f6;
}

.archive-column .card:hover {
    opacity: 1;
    background: #e5e7eb;
}

/* 列样式 */
.column {
    background: white;
    border-radius: 8px;
    padding: 1rem;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    display: flex;
    flex-direction: column;
    min-height: 500px;
}

.column h3 {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #e5e7eb;
    font-size: 1.125rem;
    color: #374151;
}

.count {
    background: #f3f4f6;
    color: #6b7280;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.75rem;
}

/* 卡片容器 */
.cards {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    margin-bottom: 1rem;
}

/* 卡片样式 */
.card {
    background: white;
    border: 1px solid var(--gray-200);
    border-radius: var(--border-radius-lg);
    padding: 1rem;
    cursor: pointer;
    transition: var(--transition);
    position: relative;
    box-shadow: var(--shadow-sm);
    backdrop-filter: blur(10px);
}

.card:hover {
    /* 移除卡片整体的hover效果，避免与内部元素冲突 */
}

.card-title {
    margin-left: 0;
    width: 100%;
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: var(--gray-900);
    word-wrap: break-word;
    white-space: pre-wrap;
    line-height: 1.4;
    font-size: 0.95rem;
    position: relative; /* allow absolute inline editor without layout change */
    min-height: 1.5rem; /* 确保有足够高度容纳绝对定位的可点击区域 */
    box-sizing: border-box;
}

/* 标题点击区域 - 简单的相对定位 */
.title-text.clickable {
    position: relative;
    display: block;
    width: 100%;
    border-radius: var(--border-radius-sm);
    transition: var(--transition);
    cursor: pointer;
}

.title-text.clickable:hover {
    background: #dbeafe !important;
}

.card-description {
    margin-left: 0;
    width: 100%;
    font-size: 0.875rem;
    color: var(--gray-600);
    margin-bottom: 0.75rem;
    line-height: 1.5;
    word-wrap: break-word;
    min-height: 1.5rem; /* 增加最小高度，确保有足够高度容纳绝对定位的可点击区域 */
    white-space: pre-wrap;
    max-height: 120px;
    overflow-y: auto;
    position: relative; /* allow absolute overlay */
    box-sizing: border-box;
}

/* 描述点击区域 - 简单的相对定位 */
.description-text.clickable {
    position: relative;
    display: block;
    width: 100%;
    border-radius: var(--border-radius-sm);
    transition: var(--transition);
    cursor: pointer;
}

.description-text.clickable:hover {
    background: #dbeafe !important;
}

/* 待办列和归档列维持无左偏移 */
.column[data-status="todo"] .card-title,
.column[data-status="todo"] .card-description,
.archive-column .card-title,
.archive-column .card-description {
    margin-left: 0;
    width: 100%;
}

/* 移除待办列的特殊处理，保持简单 */

.card-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.75rem;
    color: #9ca3af;
    margin-top: 0.5rem;
    border-top: 1px solid #e5e7eb;
    padding-top: 0.5rem;
}

.card-dates {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.card-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.75rem;
    color: #9ca3af;
    margin-top: 0.5rem;
    border-top: 1px solid #e5e7eb;
    padding-top: 0.5rem;
    cursor: pointer;
    transition: color 0.2s;
}

.card-footer-top {
    position: relative;
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    gap: 0.5rem;
    min-height: 32px;
}

.card-left-info {
    display: flex;
    gap: 0.5rem;
    align-items: center;
}

.card-center-actions {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    display: inline-flex;
    visibility: hidden;
    align-items: center;
    gap: 0.5rem;
}

.card:hover .card-center-actions {
    visibility: visible;
}

.card-center-actions .action-btn,
.card-center-actions .archive-btn,
.card-center-actions .restore-btn,
.card-center-actions .detail-btn {
    pointer-events: auto;
}

.card-right-info {
    display: flex;
    gap: 0.5rem;
    align-items: center;
    flex-wrap: wrap;
    justify-content: flex-end;
    margin-left: auto; /* push deadline to the right in flex layout */
}

.card-assignee {
    font-weight: 500;
    color: var(--primary-dark);
    background: #eff6ff;
    padding: 0.25rem 0.5rem;
    border-radius: 12px;
    font-size: 0.7rem;
    transition: var(--transition);
    border: 2px solid transparent; /* Reserve space for editing border */
}

.card-assignee.unassigned {
    color: var(--gray-400);
    background: var(--gray-100);
}

/* 小元素的特殊clickable样式 - 覆盖通用样式 */
.card-assignee.clickable,
.card-deadline.clickable {
    cursor: pointer;
    position: relative;
}

/* 移除伪元素扩大点击区域，避免焦点切换闪烁 */

.card-assignee.clickable:hover {
    background: #dbeafe !important;
}

.card-assignee.unassigned.clickable:hover {
    background: var(--gray-200) !important;
}

.card-deadline {
    background: var(--gray-100);
    padding: 0.25rem 0.5rem;
    border-radius: 12px;
    font-size: 0.7rem;
    transition: var(--transition);
    color: var(--gray-600);
    border: 2px solid transparent; /* Reserve space */
    display: inline-flex;
    align-items: center;
    min-height: 28px; /* match clickable area size */
    position: relative; /* for absolute date input */
    max-width: 160px; /* Ensure empty-date editor has enough room but not overflow */
}

.card-deadline.clickable:hover {
    background: var(--gray-200) !important;
}

.card-deadline.unset {
    color: var(--gray-400);
    background: var(--gray-100);
    padding: 0.25rem 0.5rem;
    border-radius: 12px;
    font-size: 0.7rem;
}

/* 内联编辑样式 - 统一设计 */
.inline-assignee-select,
.inline-date-input,
.inline-title-input,
.inline-description-textarea {
    background: white;
    border: none; /* Remove border to prevent size increase */
    outline: 2px solid var(--primary-color); /* Use outline for highlight */
    outline-offset: -2px; /* Keep within original bounds */
    border-radius: var(--border-radius);
    font-family: inherit;
    transition: var(--transition);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    box-sizing: border-box;
    padding: 0.25rem 0.5rem; /* Match original */
}

.inline-assignee-select,
.inline-date-input {
    padding: 0.375rem 0.5rem;
    font-size: 0.75rem;
    font-weight: 500;
    min-width: 80px;
    width: 100%; /* inherit locked width from container */
    height: 100%; /* inherit locked height from container */
    box-sizing: border-box;
}

.inline-title-input {
    padding: 0; /* no extra vertical padding */
    font-size: 0.95rem;
    font-weight: 600;
    width: 100%;
    margin-left: 0;
    margin-right: 0;
    line-height: 1.4;
    border: none;
    outline: 2px solid var(--primary-color);
    outline-offset: -2px;
    overflow: hidden; /* keep height stable */
    resize: none; /* textarea */
    white-space: pre-wrap; /* keep line breaks */
    border-radius: var(--border-radius-sm); /* Match text padding */
}

/* Overlay inline editors to avoid changing layout height */
.inline-title-input {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background: white;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-weight: 600; /* 匹配 .card-title */
    font-size: 0.95rem; /* 匹配 .card-title */
    line-height: 1.4; /* 匹配 .card-title */
    font-family: inherit;
}

/* 移除待办列特殊处理，编辑框现在自动适应父容器宽度 */

.inline-date-input {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.inline-description-textarea {
    padding: 0; /* Prevent height increase */
    font-size: 0.875rem;
    font-weight: 400;
    width: 100%;
    resize: none; /* Prevent user resizing */
    min-height: 1.25rem; /* Match original min-height */
    line-height: 1.5;
    margin-left: 0;
    margin-right: 0; /* prevent overflow */
    overflow-y: hidden; /* Hide scrollbar if not needed */
    border: none;
    outline: 2px solid var(--primary-color);
    outline-offset: -2px;
    border-radius: var(--border-radius-sm); /* Match text padding */
}

.inline-description-textarea {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background: white;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* 移除待办列特殊处理，编辑框现在自动适应父容器宽度 */

.inline-assignee-select:focus,
.inline-date-input:focus,
.inline-title-input:focus,
.inline-description-textarea:focus {
    outline: none;
}

.card-author {
    font-weight: 500;
    color: #2563eb;
}

.card-created {
    font-size: 0.75rem;
    color: #9ca3af;
}

.deadline {
    color: #dc2626;
    font-weight: 500;
}

.deadline.upcoming {
    color: #f59e0b;
}

.deadline.overdue {
    color: #dc2626;
    background: #fef2f2;
    padding: 0.125rem 0.25rem;
    border-radius: 3px;
}

/* 编辑中的卡片 */
.card.editing {
    /* 移除编辑状态的特殊颜色 */
}

/* 内联编辑模式的卡片 */
.card.inline-editing {
    /* 移除内联编辑状态的特殊颜色 */
}

.editing-indicator {
    position: absolute;
    top: -2px;
    right: -2px;
    width: 8px;
    height: 8px;
    background: #10b981;
    border-radius: 50%;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

/* 添加卡片区域 */
.add-card {
    background: transparent !important;
    /* padding: 1rem !important; */
    gap: 0.5rem;
    border: none !important;
    border-radius: 0 !important;
    margin-top: -14px !important;
}

.input-row {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.input-row-inline {
    display: flex;
    gap: 0.5rem;
    align-items: center;
    justify-content: space-between;
}

.left-inputs {
    display: flex;
    gap: 0.5rem;
    align-items: center;
    flex: 1;
}

.left-inputs .task-title-input {
    flex: 1;
    min-width: 0;
}

.input-row-inline .date-input {
    margin-left: auto;
    flex-shrink: 0;
}

.input-group {
    display: flex;
    gap: 0.5rem;
    align-items: center;
}

.add-card input[type="text"],
.task-title-input {
    padding: 0.875rem 1rem;
    border: 2px solid var(--gray-200);
    border-radius: var(--border-radius-lg);
    font-size: 0.875rem;
    transition: var(--transition);
    background: white;
    font-family: inherit;
    flex: 1;
    box-shadow: var(--shadow-sm);
    font-weight: 400;
    outline: none;
}

.task-title-input {
    flex: 3;
    min-width: 0;
}

.add-card input[type="text"]:focus,
.task-title-input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: var(--shadow), 0 0 0 3px rgba(59, 130, 246, 0.1);
    transform: translateY(-1px);
}

.add-card input[type="text"]::placeholder,
.task-title-input::placeholder {
    color: var(--gray-400);
    font-style: italic;
    font-weight: 400;
}

.assignee-select {
    padding: 0.75rem 0.875rem;
    border: 2px solid var(--gray-200);
    border-radius: var(--border-radius);
    background: white;
    color: var(--gray-700);
    font-size: 0.8rem;
    transition: var(--transition);
    cursor: pointer;
    min-width: 80px;
    max-width: 100px;
    font-family: inherit;
    font-weight: 500;
    box-shadow: var(--shadow-sm);
}

.assignee-select:hover,
.assignee-select:focus {
    border-color: var(--primary-color);
    outline: none;
    box-shadow: var(--shadow), 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.date-input {
    padding: 0.75rem 0.875rem;
    border: 2px solid var(--gray-200);
    border-radius: var(--border-radius);
    background: white;
    font-size: 0.8rem;
    transition: var(--transition);
    cursor: pointer;
    width: 120px;
    font-family: inherit;
    font-weight: 500;
    box-shadow: var(--shadow-sm);
    outline: none;
}

.date-input:hover,
.date-input:focus {
    border-color: var(--primary-color);
    outline: none;
    box-shadow: var(--shadow), 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.add-card input[type="date"] {
    padding: 0.3rem;
    border: 1px solid #cbd5e1;
    border-radius: 4px;
    font-size: 0;
    background: #f8fafc;
    color: transparent;
    transition: all 0.2s;
    width: 32px;
    height: 32px;
    flex-shrink: 0;
    cursor: pointer;
    position: relative;
}

.add-card input[type="date"]::-webkit-calendar-picker-indicator {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: auto;
    height: auto;
    color: #64748b;
    cursor: pointer;
}

.add-card input[type="date"]:focus {
    outline: none;
    border-color: #3b82f6;
    background: #eff6ff;
}

.add-card input[type="date"]:hover {
    border-color: #94a3b8;
    background: #f1f5f9;
}

.add-card button {
    width: 100%;
    margin: 0;
    padding: 0.875rem 1.25rem;
    background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
    color: white;
    border: none;
    border-radius: var(--border-radius-lg);
    cursor: pointer;
    font-size: 0.875rem;
    font-weight: 600;
    transition: var(--transition);
    box-shadow: var(--shadow);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
}

.add-card button:hover {
    background: linear-gradient(135deg, var(--primary-dark), #1e40af);
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.add-card button:active {
    transform: translateY(0);
    box-shadow: var(--shadow);
}

.add-card button:focus {
    outline: none;
    box-shadow: var(--shadow), 0 0 0 3px rgba(59, 130, 246, 0.3);
}

.add-card button:disabled {
    background: #9ca3af;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}

/* 快捷键提示 */
.keyboard-hint {
    font-size: 0.75rem;
    color: var(--gray-400);
    text-align: center;
    margin-top: 0.5rem;
    font-style: italic;
    opacity: 0.8;
    transition: var(--transition);
}

.add-card:hover .keyboard-hint {
    opacity: 1;
    color: var(--gray-500);
}

/* 卡片移动按钮 */
.card-actions {
    display: none;
    position: relative;
    margin-top: 0.5rem;
    padding: 0;
    justify-content: center;
    align-items: center;
    gap: 0.5rem;
    pointer-events: none;
    width: 100%; /* center within full footer width */
}

.card-actions .action-btn,
.card-actions .archive-btn,
.card-actions .restore-btn,
.card-actions .detail-btn {
    pointer-events: auto;
}

/* 所有按钮现在都居中显示，有统一间距 */


.card:hover .card-actions {
    display: flex;
}

.action-btn,
.archive-btn,
.restore-btn,
.detail-btn {
    width: 24px;
    height: 24px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.75rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    padding: 0; /* ensure no extra padding */
    box-sizing: border-box; /* include borders in size */
}

.move-left {
    background: #3b82f6;
    color: white;
}

.move-right {
    background: #10b981;
    color: white;
}

.archive-btn {
    background: #f59e0b;
    color: white;
}

.restore-btn {
    background: #8b5cf6;
    color: white;
}

.card-detail-center {
    display: flex;
    justify-content: center;
    margin: 0.75rem 0;
}

.detail-btn {
    background: #6366f1;
    color: white;
    box-shadow: 0 2px 4px rgba(99, 102, 241, 0.2);
}

.action-btn:hover, .archive-btn:hover, .restore-btn:hover, .detail-btn:hover {
    transform: scale(1.1);
}

/* 模态框 */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    animation: fadeIn 0.2s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.modal-content {
    background: white;
    border-radius: var(--border-radius-xl);
    width: 90%;
    max-width: 540px;
    max-height: 90vh;
    overflow: hidden;
    box-shadow: var(--shadow-lg);
    animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

@keyframes slideUp {
    from { transform: translateY(30px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

.edit-modal .modal-header {
    background: #f8fafc;
    border-bottom: 1px solid #e2e8f0;
    color: #1e293b;
    padding: 1rem 1.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.edit-modal .modal-header h3 {
    margin: 0;
    font-size: 1.1rem;
    font-weight: 600;
}

.close-btn {
    background: none;
    border: none;
    color: #64748b;
    font-size: 1.5rem;
    cursor: pointer;
    padding: 0.25rem;
    border-radius: 4px;
    transition: background-color 0.2s;
    line-height: 1;
}

.close-btn:hover {
    background: rgba(0, 0, 0, 0.1);
    color: #374151;
}

.modal-body {
    padding: 1.5rem;
    overflow-y: auto;
    max-height: calc(90vh - 200px);
}

.form-group {
    margin-bottom: 1rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
    color: #374151;
    font-size: 0.9rem;
}

.form-row {
    display: flex;
    gap: 1rem;
}

.form-group.flex-1 {
    flex: 1;
}

.form-group.flex-2 {
    flex: 2;
}

.form-group input,
.form-group textarea,
.form-group select {
    width: 100%;
    padding: 0.75rem 1rem;
    border: 2px solid #e5e7eb;
    border-radius: 8px;
    font-size: 0.9rem;
    transition: all 0.2s;
    font-family: inherit;
    min-height: 38px;
}

.form-group input:focus,
.form-group textarea:focus,
.form-group select:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.form-group select {
    background: white;
    cursor: pointer;
}

.card-info {
    background: #f8fafc;
    padding: 0.75rem;
    border-radius: 6px;
    border: 1px solid #e2e8f0;
    display: flex;
    justify-content: space-between;
    font-size: 0.8rem;
    color: #64748b;
}

.modal-footer {
    background: #f8fafc;
    padding: 1rem 1.5rem;
    border-top: 1px solid #e2e8f0;
    display: flex;
    justify-content: flex-end;
    gap: 0.75rem;
}

.modal-footer button {
    padding: 0.5rem 1rem;
    border: none;
    border-radius: 6px;
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    font-family: inherit;
}

.btn-primary {
    background: #3b82f6;
    color: white;
}

.btn-primary:hover {
    background: #2563eb;
}

.btn-danger {
    background: #dc2626;
    color: white;
}

.btn-danger:hover {
    background: #b91c1c;
}

.btn-secondary {
    background: #f1f5f9;
    color: #64748b;
    border: 1px solid #e2e8f0;
}

.btn-secondary:hover {
    background: #e2e8f0;
    color: #475569;
}

/* 兼容旧的模态框样式 */
.modal-actions {
    display: flex;
    gap: 0.5rem;
    justify-content: flex-end;
    flex-wrap: wrap;
}

.modal-actions button {
    padding: 0.5rem 1rem;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.875rem;
    transition: all 0.2s;
}

.modal-actions button:first-child {
    background: #2563eb;
    color: white;
}

.modal-actions button:first-child:hover {
    background: #1d4ed8;
}

.delete-btn {
    background: #dc2626 !important;
    color: white !important;
}

.delete-btn:hover {
    background: #b91c1c !important;
}

.modal-actions button:last-child {
    background: #6b7280;
    color: white;
}

.modal-actions button:last-child:hover {
    background: #4b5563;
}

/* 归档功能样式 */
.archive-actions {
    margin-top: auto;
    padding-top: 1rem;
}

.clear-archive-btn {
    width: 100%;
    padding: 0.5rem;
    background: #dc2626;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.875rem;
    transition: background 0.2s;
}

.clear-archive-btn:hover {
    background: #b91c1c;
}

.clear-archive-btn:disabled {
    background: #9ca3af;
    cursor: not-allowed;
}

/* 归档列特殊样式 */
.column[data-status="archived"] {
    background: #f9fafb;
    border: 2px dashed #d1d5db;
}

.column[data-status="archived"] h3 {
    color: #6b7280;
}

.column[data-status="archived"] .card {
    opacity: 0.8;
    background: #f3f4f6;
}

.column[data-status="archived"] .card:hover {
    opacity: 1;
    background: #e5e7eb;
}

/* 所有列的卡片现在都没有左侧间距，因为移动按钮已移到底部 */

/* 导入选项样式 */
.import-options {
    margin: 1rem 0;
}

.import-options label {
    display: block;
    padding: 0.75rem;
    margin-bottom: 0.5rem;
    border: 2px solid #e5e7eb;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s;
}

.import-options label:hover {
    border-color: #2563eb;
    background: #f8fafc;
}

.import-options label input[type="radio"] {
    margin-right: 0.5rem;
}

.import-options label span {
    font-weight: 500;
    display: block;
    margin-bottom: 0.25rem;
}

.import-options label small {
    color: #6b7280;
    font-size: 0.875rem;
}

.import-options label input[type="radio"]:checked + span {
    color: #2563eb;
}

.import-options label:has(input[type="radio"]:checked) {
    border-color: #2563eb;
    background: #eff6ff;
}

#importBtn {
    background: #0ea5e9;
    color: white;
}

#importBtn:hover {
    background: #0284c7;
}

#archiveBtn {
    background: #f59e0b;
    color: white;
}

#archiveBtn:hover {
    background: #d97706;
}

/* 响应式设计 */
@media (max-width: 768px) {
    .board-container {
        grid-template-columns: 1fr;
        gap: 1rem;
        padding: 1rem;
    }

    .header {
        padding: 1rem;
        flex-direction: column;
        align-items: stretch;
    }

    .header-actions {
        justify-content: center;
    }

    .online-users {
        justify-content: center;
    }

    .column {
        min-height: 300px;
    }

    .modal-content {
        margin: 1rem;
        width: calc(100% - 2rem);
    }

    .project-list, .board-list {
        grid-template-columns: 1fr;
    }

    .create-project-form, .join-project-form, .create-board-form {
        flex-direction: column;
    }

    .create-project-form input, .join-project-form input, .create-board-form input {
        min-width: auto;
    }

    .board-header-left {
        margin-bottom: 1rem;
    }
}

/* 项目选择页面样式 */
.project-header, .board-select-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid #e5e7eb;
}

.project-section, .board-section {
    background: white;
    padding: 1.5rem;
    border-radius: 8px;
    margin-bottom: 1.5rem;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.project-section h2, .board-section h2 {
    margin: 0 0 1rem 0;
    color: #374151;
    font-size: 1.25rem;
}

.project-list, .board-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1rem;
    margin-bottom: 1rem;
}

.project-card, .board-card {
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    padding: 1.25rem;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
    min-height: 85px;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
}

/* 项目卡片操作按钮（右上角悬浮显示） */
.project-card-with-actions { position: relative; }
.project-card-actions {
    display: none;
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    gap: 0.5rem;
}
.project-card-with-actions:hover .project-card-actions { display: flex; }
.project-action-btn {
    width: 32px;
    height: 32px;
    border: 1px solid rgba(0,0,0,0.08);
    border-radius: 8px;
    background: rgba(255,255,255,0.9);
    color: #64748b;
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition);
}
.project-action-btn:hover {
    background: #fff;
    color: #374151;
    transform: translateY(-1px) scale(1.03);
    box-shadow: 0 6px 12px rgba(0,0,0,0.12);
}
.project-action-btn.rename-btn { color: #2563eb; border-color: rgba(37,99,235,0.25); }
.project-action-btn.pin-btn { color: #16a34a; border-color: rgba(22,163,74,0.25); }
.project-action-btn.pin-btn:hover { background: rgba(22,163,74,0.08); }
.board-action-btn.pin-btn { color: #16a34a; border-color: rgba(22,163,74,0.25); }
.board-action-btn.pin-btn:hover { background: rgba(22,163,74,0.08); }
.board-action-btn.rename-btn:hover, .project-action-btn.rename-btn:hover { background: rgba(37,99,235,0.08); }

.project-card {
    background: linear-gradient(135deg, #ffffff 0%, #f3f4f6 100%);
}

.board-card {
    background: linear-gradient(135deg, #f7fdf7 0%, #f0fdf4 100%);
    border-color: #d1fae5;
}

.project-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    border-color: #667eea;
    background: linear-gradient(135deg, #ffffff 0%, #f9fafb 100%);
}

.board-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 20px rgba(34, 197, 94, 0.08);
    border-color: #a7f3d0;
    background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
}

.project-card h3, .board-card h3 {
    margin: 0 0 0.5rem 0;
    color: #1f2937;
    font-size: 1.125rem;
}

.project-card .project-info, .board-card .board-info {
    color: #6b7280;
    font-size: 0.875rem;
    line-height: 1.4;
}

.invite-code {
    background: #eff6ff;
    color: #1d4ed8;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
    font-weight: bold;
    font-size: 1.1em;
}

.create-project-form, .join-project-form, .create-board-form {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
}

.create-project-form input, .join-project-form input, .create-board-form input {
    flex: 1;
    min-width: 200px;
    padding: 0.75rem;
    border: 2px solid #e2e8f0;
    border-radius: 6px;
    font-size: 0.9rem;
    transition: border-color 0.2s;
}

.create-project-form input:focus, .join-project-form input:focus, .create-board-form input:focus {
    outline: none;
    border-color: #3b82f6;
}

.create-project-form button, .join-project-form button, .create-board-form button {
    padding: 0.75rem 1.5rem;
    background: linear-gradient(135deg, #3b82f6, #1d4ed8);
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 500;
    transition: all 0.2s;
    white-space: nowrap;
}

.create-project-form button:hover, .join-project-form button:hover, .create-board-form button:hover {
    background: linear-gradient(135deg, #1d4ed8, #1e40af);
    transform: translateY(-1px);
}

.project-info {
    background: #f8fafc;
    padding: 2rem;
    border-radius: 6px;
    /* margin-bottom: 2rem; */
}

.project-info p {
    margin: 0.5rem 0;
    color: #4b5563;
}

/* SECTION: Headers & Breadcrumbs */
/* 看板头部样式 */
.board-header-left {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
}

.board-breadcrumb {
    /* base breadcrumb styles; page-specific sizes set later */
    color: #374151;
    margin: 0;
    font-weight: bold;
}

.board-breadcrumb span {
    color: #374151;
    font-weight: 500;
}

.board-breadcrumb .project-link {
    color: #3b82f6;
    cursor: pointer;
    text-decoration: none;
    border-bottom: 2px solid transparent;
    transition: all 0.2s;
}

.board-breadcrumb .project-link:hover {
    color: #1d4ed8;
    border-bottom-color: #1d4ed8;
}

.project-breadcrumb {
    font-size: 1.875rem;
    color: #374151;
    margin: 0;
    font-weight: bold;
}

.project-breadcrumb span {
    color: #374151;
    font-weight: 500;
}

.project-breadcrumb .home-link {
    color: #3b82f6;
    cursor: pointer;
    text-decoration: none;
    border-bottom: 2px solid transparent;
    transition: all 0.2s;
}

.project-breadcrumb .home-link:hover {
    color: #1d4ed8;
    border-bottom-color: #1d4ed8;
}

/* Breadcrumb link on board page */
.board-breadcrumb .home-link {
    color: #3b82f6;
    cursor: pointer;
    text-decoration: none;
    border-bottom: 2px solid transparent;
    transition: all 0.2s;
}
.board-breadcrumb .home-link:hover {
    color: #1d4ed8;
    border-bottom-color: #1d4ed8;
}

/* Iconic back arrow for board breadcrumb */
/* Left arrow icon (matches board name caret style but mirrored) */
.board-breadcrumb .home-arrow {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 2px 6px;
    border-radius: 6px;
    transition: var(--transition);
    color: #374151 !important; /* match board name color */
    border-bottom-color: transparent !important; /* avoid underline hue from .home-link */
}
.board-breadcrumb .home-arrow:hover { background: var(--gray-100); color: #374151 !important; border-bottom-color: transparent !important; }
.board-breadcrumb .home-arrow::before {
    content: '';
    display: inline-block;
    width: 0;
    height: 0;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-top: 6px solid currentColor; /* down-facing triangle */
    opacity: 0.7;
    transform-origin: center;
    transition: transform 0.2s ease, opacity 0.2s ease;
}
.board-breadcrumb .home-arrow:hover::before { opacity: 1; transform: translateY(1px); }
.board-breadcrumb .home-arrow.open::before { transform: rotate(-90deg); opacity: 1; }

/* Generic breadcrumb caret (used for projectCaret and boardCaret) */
.board-breadcrumb .crumb-caret, .project-breadcrumb .crumb-caret {
    display: inline-flex;
    align-items: center;
    cursor: pointer;
    gap: 6px;
    padding: 2px 6px;
    border-radius: 6px;
    transition: var(--transition);
    color: #374151; /* match text color */
}
.board-breadcrumb .crumb-caret:hover, .project-breadcrumb .crumb-caret:hover { background: var(--gray-100); }
.board-breadcrumb .crumb-caret::before, .project-breadcrumb .crumb-caret::before {
    content: '';
    display: inline-block;
    width: 0; height: 0;
    border-top: 5px solid transparent;
    border-bottom: 5px solid transparent;
    border-left: 6px solid currentColor; /* right-facing */
    opacity: 0.7;
    transform-origin: center;
    transition: transform 0.2s ease, opacity 0.2s ease;
}
.board-breadcrumb .crumb-caret:hover::before, .project-breadcrumb .crumb-caret:hover::before { opacity: 1; transform: translateX(1px); }
.board-breadcrumb .crumb-caret.open::before, .project-breadcrumb .crumb-caret.open::before { transform: rotate(90deg); opacity: 1; }

/* Inline rename input for breadcrumb board name */
.breadcrumb-rename-input {
  font: inherit;
  color: #111827;
  padding: 2px 6px;
  border: 1px solid var(--gray-300);
  border-radius: 6px;
  outline: none;
  width: auto;
  min-width: 8ch;
  background: #fff;
}
.breadcrumb-rename-input:focus {
  border-color: var(--primary-color);
  box-shadow: 0 0 0 3px rgba(59,130,246,.12);
}

/* Final header/breadcrumb tuning for board page */
#boardPage .board-breadcrumb {
    font-size: 1.5rem; /* smaller than project page for balance */
    margin: 0;
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

.logout-btn {
    background: #dc2626 !important;
    color: white;
}

.logout-btn:hover {
    background: #b91c1c !important;
}

#backToBoardSelect {
    background: #6b7280;
    color: white;
}



.empty-state {
    text-align: center;
    color: #6b7280;
    font-style: italic;
    padding: 2rem;
    background: #f9fafb;
    border: 2px dashed #d1d5db;
    border-radius: 8px;
}

/* 首页优化样式 */
.all-boards-section, .projects-section {
    margin-bottom: 2rem;
}

.all-boards-section h3, .projects-section h3 {
    margin: 0 0 1rem 0;
    color: #1f2937;
    font-size: 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.all-boards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1rem;
}

.quick-board-card {
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    color: #1e293b;
    border-radius: 8px;
    padding: 1.25rem;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 0.875rem;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    min-height: 70px;
    border: 1px solid #cbd5e1;
}

.quick-board-card:hover {
    transform: translateY(-1px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%);
}

.board-icon {
    font-size: 1.5rem;
    background: #3b82f6;
    color: white;
    border-radius: 6px;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.board-details h4 {
    margin: 0 0 0.5rem 0;
    font-size: 1.125rem;
    font-weight: 600;
}

.board-project {
    font-size: 0.875rem;
    color: #64748b;
    background: rgba(100, 116, 139, 0.1);
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    display: inline-block;
}

/* 看板卡片操作按钮 */
.board-card-with-actions {
    position: relative;
}

.board-card-actions {
    display: none;
    position: absolute;
    top: 1rem;
    right: 1rem;
    gap: 0.5rem;
}

.board-card-with-actions:hover .board-card-actions {
    display: flex;
}
/* Keep actions visible when menu is open (card holds active state) */
.board-card-with-actions.hold-actions .board-card-actions { display: flex; }

/* 统一卡片动作按钮风格 */
.board-action-btn,
.project-action-btn {
    width: 32px;
    height: 32px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.875rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    background: rgba(255, 255, 255, 0.9);
    color: #64748b;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    border: 1px solid rgba(0, 0, 0, 0.1);
}

.board-action-btn:hover,
.project-action-btn:hover {
    background: white;
    color: #374151;
    transform: scale(1.1);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

.board-action-btn:hover {
    background: white;
    color: #374151;
    transform: scale(1.1);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

.board-action-btn.delete-btn {
    color: #dc2626;
    background: rgba(255, 255, 255, 0.9);
}

.board-action-btn.delete-btn:hover {
    background: #dc2626;
    color: white;
    box-shadow: 0 4px 8px rgba(220, 38, 38, 0.3);
}
.board-action-btn.more-btn {
    color: #6b7280;
    border: 1px solid rgba(0,0,0,0.08);
}
.board-action-btn.more-btn:hover {
    background: #fff;
}

/* SECTION: Actions Menus / Switchers */
/* Collapsed board actions menu */
.board-actions-menu {
    background: #fff;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.12);
    padding: 6px;
    min-width: 168px;
}
.board-actions-menu button {
    display: block;
    width: 100%;
    text-align: left;
    background: transparent;
    border: none;
    padding: 8px 10px;
    border-radius: 6px;
    color: #374151;
    font-size: 14px;
    cursor: pointer;
}
.board-actions-menu button:hover {
    background: #f3f4f6;
}
.board-actions-menu button.danger {
    color: #dc2626;
}
.board-actions-menu button.danger:hover {
    background: #fee2e2;
}

/* 项目头部样式 */
.project-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid #e5e7eb;
}

.user-info {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.user-info span {
    color: #4b5563;
    font-weight: 500;
    background: #f3f4f6;
    padding: 0.5rem 1rem;
    border-radius: 20px;
}

/* 工作台样式 */
.dashboard-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-bottom: 2rem;
}

.stat-card {
    background: white;
    padding: 1.5rem;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    display: flex;
    align-items: center;
    gap: 1rem;
    border-left: 4px solid #3b82f6;
    transition: transform 0.2s;
}

.stat-card:hover {
    transform: translateY(-2px);
}

.stat-icon {
    font-size: 2rem;
    background: linear-gradient(135deg, #3b82f6, #1d4ed8);
    border-radius: 50%;
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.stat-info {
    display: flex;
    flex-direction: column;
}

.stat-number {
    font-size: 2rem;
    font-weight: bold;
    color: #1f2937;
    line-height: 1;
}

.stat-label {
    color: #6b7280;
    font-size: 0.875rem;
    margin-top: 0.25rem;
}

.dashboard-section {
    margin-bottom: 2rem;
}

.dashboard-section h2 {
    margin: 0 0 1rem 0;
    color: #1f2937;
    font-size: 1.5rem;
}

.quick-boards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 1rem;
}

.recent-activities {
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    overflow: hidden;
}

.activity-item {
    padding: 1rem 1.5rem;
    border-bottom: 1px solid #f3f4f6;
    display: flex;
    align-items: center;
    gap: 1rem;
}

.activity-item:last-child {
    border-bottom: none;
}

.activity-icon {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.25rem;
    background: #f0f9ff;
    flex-shrink: 0;
}

.activity-content {
    flex: 1;
}

.activity-title {
    font-weight: 500;
    color: #1f2937;
    margin: 0 0 0.25rem 0;
}

.activity-time {
    font-size: 0.875rem;
    color: #6b7280;
}

/* 项目管理样式 */
.projects-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
}

.projects-header h2 {
    margin: 0;
    color: #1f2937;
}

.header-actions {
    display: flex;
    gap: 1rem;
}

.btn-primary {
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    color: white;
    border: none;
    padding: 0.625rem 1.25rem;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 500;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    box-shadow: 0 2px 4px rgba(59, 130, 246, 0.15);
    font-size: 0.875rem;
}

.btn-primary:hover {
    background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(59, 130, 246, 0.25);
}

.btn-secondary {
    background: #f3f4f6;
    color: #374151;
    border: 1px solid #d1d5db;
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 500;
    transition: all 0.2s;
}

.btn-secondary:hover {
    background: #e5e7eb;
}

.create-form {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.form-card {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    width: 100%;
    max-width: 400px;
}

.form-card h3 {
    margin: 0 0 1.5rem 0;
    color: #1f2937;
}

.form-card input {
    width: 100%;
    padding: 0.75rem;
    border: 2px solid #e2e8f0;
    border-radius: 8px;
    font-size: 1rem;
    margin-bottom: 1.5rem;
    box-sizing: border-box;
}

.form-card input:focus {
    outline: none;
    border-color: #3b82f6;
}

.form-actions {
    display: flex;
    gap: 1rem;
    justify-content: flex-end;
}

/* 加入项目样式 */
.join-section {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 400px;
}

.join-card {
    background: white;
    padding: 3rem;
    border-radius: 16px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
    text-align: center;
    max-width: 500px;
    width: 100%;
}

.join-icon {
    font-size: 4rem;
    margin-bottom: 1rem;
}

.join-card h2 {
    margin: 0 0 0.5rem 0;
    color: #1f2937;
}

.join-card p {
    color: #6b7280;
    margin: 0 0 2rem 0;
}

.join-form {
    display: flex;
    gap: 1rem;
    margin-bottom: 2rem;
    flex-wrap: wrap;
}

.join-form input {
    flex: 1;
    min-width: 200px;
    padding: 0.75rem;
    border: 2px solid #e2e8f0;
    border-radius: 8px;
    font-size: 1rem;
    text-transform: uppercase;
    text-align: center;
    font-weight: bold;
}

.join-form input:focus {
    outline: none;
    border-color: #3b82f6;
}

.join-tips {
    text-align: left;
    background: #f8fafc;
    padding: 1.5rem;
    border-radius: 8px;
    border-left: 4px solid #3b82f6;
}

.join-tips h4 {
    margin: 0 0 1rem 0;
    color: #374151;
}

.join-tips ul {
    margin: 0;
    padding-left: 1.5rem;
}

.join-tips li {
    color: #6b7280;
    margin-bottom: 0.5rem;
}

/* 桌面版优化 */
@media (min-width: 1024px) {
    .container {
        max-width: 1200px;
        margin: 0 auto;
    }

    .quick-boards-grid {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 1.25rem;
    }

    .projects-grid {
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1.25rem;
    }


    .dashboard-section {
        margin-bottom: 3rem;
    }

    .quick-board-card {
        padding: 1.25rem;
        min-height: 70px;
    }

    .board-icon {
        width: 40px;
        height: 40px;
        font-size: 1.5rem;
    }

    .board-details h4 {
        font-size: 1.125rem;
    }

    .project-card {
        padding: 1.25rem;
        min-height: 85px;
    }

    .board-container {
        padding: 1.5rem 2.5rem;
        gap: 1.5rem;
    }
}

/* 移动端响应式 */
@media (max-width: 768px) {

    /* 工作台响应式 */
    .dashboard-stats {
        grid-template-columns: 1fr;
        gap: 0.75rem;
    }

    .stat-card {
        padding: 1rem;
        gap: 0.75rem;
    }

    .stat-icon {
        width: 50px;
        height: 50px;
        font-size: 1.5rem;
    }

    .stat-number {
        font-size: 1.5rem;
    }

    .quick-boards-grid {
        grid-template-columns: 1fr;
    }

    .projects-grid {
        grid-template-columns: 1fr;
    }

    .projects-header {
        flex-direction: column;
        align-items: stretch;
        gap: 1rem;
    }

    .join-card {
        padding: 2rem 1.5rem;
    }

    .join-form {
        flex-direction: column;
    }

    .join-form input {
        min-width: auto;
    }

    .form-card {
        margin: 1rem;
        width: calc(100% - 2rem);
        max-width: none;
    }

    .form-actions {
        flex-direction: column;
        gap: 0.75rem;
    }

    .user-info {
        flex-direction: column;
        align-items: flex-end;
        gap: 0.5rem;
    }

    .project-header h1 {
        font-size: 1.5rem;
    }
}

.assignee-dropdown {
    position: absolute;
    z-index: 2000;
    background: white;
    border: 1px solid var(--gray-200);
    border-radius: 8px;
    box-shadow: var(--shadow-lg);
    padding: 0.25rem;
    max-height: 240px;
    overflow-y: auto;
}

.assignee-option {
    padding: 0.5rem 0.75rem;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.85rem;
    color: var(--gray-700);
}

.assignee-option:hover {
    background: #eff6ff;
    color: var(--primary-dark);
}

.assignee-option.selected {
    background: #dbeafe;
    color: var(--primary-dark);
    font-weight: 600;
}


/* 待办列和归档列的编辑框精确匹配原文本 */
.column[data-status="todo"] .inline-title-input,
.archive-column .inline-title-input,
.column[data-status="todo"] .inline-description-textarea,
.archive-column .inline-description-textarea {
    left: 0;
    width: 100%;
    margin: 0;
}

/* Prevent inline editors from expanding width */
.inline-title-input,
.inline-description-textarea {
    max-width: 100%;
}

/* Keep card layout from stretching due to long text */
.card-title,
.card-description {
    word-break: break-word;
    overflow-wrap: anywhere;
}

/* =============================================
   现代极简主题覆盖（不改动结构，仅覆写样式）
   ============================================= */
:root {
    /* 中性配色与圆角、阴影统一 */
    --primary-color: #3b82f6;
    --primary-dark: #2563eb;
    --primary-light: #60a5fa;

    --gray-50: #fafafa;
    --gray-100: #f5f7fb;
    --gray-200: #e8ecf3;
    --gray-300: #d9dee7;
    --gray-400: #a0a8b8;
    --gray-500: #6b7280;
    --gray-600: #4f5565;
    --gray-700: #2e3340;
    --gray-800: #1c2130;
    --gray-900: #0f1420;

    --border-radius-sm: 6px;
    --border-radius: 10px;
    --border-radius-lg: 12px;
    --border-radius-xl: 16px;

    --shadow-sm: 0 1px 2px rgba(16, 24, 40, 0.06);
    --shadow: 0 2px 8px rgba(16, 24, 40, 0.08);
    --shadow-md: 0 6px 16px rgba(16, 24, 40, 0.10);
    --shadow-lg: 0 12px 24px rgba(16, 24, 40, 0.12);

    --transition: all 0.18s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 背景更素雅 */
body {
    background: linear-gradient(180deg, #f6f7fb 0%, #eef1f7 100%);
    color: var(--gray-800);
}

/* 顶部条更简洁：去重阴影，轻边框 */
.header {
    background: #ffffff;
    box-shadow: none;
    border-bottom: 1px solid var(--gray-200);
}

/* 顶部按钮统一风格 */
.header button,
#backToProjects,
#logoutFromBoard,
#backToBoard,
#backToBoardSelect,
#logoutBtn,
#logoutFromProject {
    background: #ffffff;
    color: var(--gray-700);
    border: 1px solid var(--gray-300);
    box-shadow: var(--shadow-sm);
    border-radius: var(--border-radius);
    height: 36px;
    padding: 0 0.875rem;
}
.header button:hover,
#backToProjects:hover,
#logoutFromBoard:hover,
#backToBoard:hover,
#backToBoardSelect:hover,
#logoutBtn:hover,
#logoutFromProject:hover,
#boardSelectPage .board-select-header .header-actions button:hover
 {
    transform: translateY(-1px);
    box-shadow: var(--shadow);
    border-color: var(--gray-400);
    background: #e5e7eb;
}

/* 重要操作维持主色但更扁平 */
#exportBtn, #importBtn, #archiveBtn, .btn-primary {
    background: var(--primary-color) !important;
    border: 1px solid transparent !important;
    color: #fff !important;
    box-shadow: var(--shadow) !important;
}
#exportBtn:hover, #importBtn:hover, #archiveBtn:hover, .btn-primary:hover {
    background: var(--primary-dark) !important;
    transform: translateY(-1px);
}
.logout-btn, #logoutBtn {
    background: var(--danger-color) !important;
    border: 1px solid transparent !important;
}

/* 看板布局留白更舒适 */
.board-container {
    gap: 1.5rem;
    padding: 2rem;
}

/* 列更卡片化、弱阴影、细边框 */
.column {
    background: #fff;
    border: 1px solid var(--gray-200);
    box-shadow: var(--shadow-sm);
    border-radius: var(--border-radius-lg);
    padding: 1rem;
}
.column h3 {
    border-bottom: 1px solid var(--gray-200);
    color: var(--gray-800);
}

/* 卡片更干净：细边框+悬浮提升 */
.card {
    background: #fff;
    border: 1px solid var(--gray-200);
    box-shadow: var(--shadow-sm);
    border-radius: var(--border-radius-lg);
    transition: var(--transition);
}
.card:hover {
    border-color: var(--primary-light);
    box-shadow: var(--shadow-md);
    transform: translateY(-1px);
}
.card-footer {
    border-top: 1px solid var(--gray-200);
}

/* 动作按钮更中性，减少视觉噪音 */
.action-btn,
.archive-btn,
.restore-btn,
.detail-btn {
    width: 28px;
    height: 28px;
    background: var(--gray-100);
    color: var(--gray-700);
    border: 1px solid var(--gray-300);
    border-radius: 6px;
    box-shadow: none;
}
.action-btn:hover,
.archive-btn:hover,
.restore-btn:hover,
.detail-btn:hover {
    background: #fff;
    border-color: var(--gray-400);
    transform: translateY(-1px) scale(1.02);
}
/* 左右移动维持轻微色彩提示 */
.move-left { color: #2563eb; }
.move-right { color: #059669; }
.archive-btn { color: #f59e0b; }
.restore-btn { color: #8b5cf6; }
.detail-btn { color: #6366f1; }

/* 添加任务区域更简洁 */
.add-card {
    background: var(--gray-50);
    border: 1px dashed var(--gray-300);
}
.add-card input[type="text"],
.task-title-input,
.assignee-select,
.date-input {
    background: #fff;
    border: 1px solid var(--gray-300);
    box-shadow: none;
}
.add-card input[type="text"]:focus,
.task-title-input:focus,
.assignee-select:focus,
.date-input:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.12);
}
.add-card button {
    height: 40px;
    border-radius: var(--border-radius-lg);
}

/* 快速访问卡片与项目卡片统一为白底卡片 */
.quick-board-card,
.project-card,
.board-card {
    background: #fff;
    border: 1px solid var(--gray-200);
    box-shadow: var(--shadow-sm);
}
.quick-board-card:hover,
.project-card:hover,
.board-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    border-color: var(--primary-light);
    background: #fff;
}

/* 模态更轻，圆角更大 */
.modal-content {
    background: #fff;
    border: 1px solid var(--gray-200);
    box-shadow: var(--shadow-lg);
    border-radius: var(--border-radius-xl);
}
.edit-modal .modal-header,
.modal-footer {
    background: var(--gray-50);
    border-color: var(--gray-200);
}
.form-group input,
.form-group textarea,
.form-group select {
    background: #fff;
    border: 1px solid var(--gray-300);
}
.form-group input:focus,
.form-group textarea:focus,
.form-group select:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.12);
}

/* 在线用户小徽章 */
#userList .online-user,
.user-badge {
    background: var(--primary-color);
    color: #fff;
    border-radius: 999px;
    padding: 0.2rem 0.5rem;
    font-size: 0.72rem;
}

/* 可点击文本悬浮更柔和 */
.title-text.clickable:hover,
.description-text.clickable:hover {
    background: rgba(59, 130, 246, 0.12) !important;
}

/* 深色模式（跟随系统） */
@media (prefers-color-scheme: dark) {
    :root {
        --gray-50: #0c1220;
        --gray-100: #0f1629;
        --gray-200: #1b2438;
        --gray-300: #2a3550;
        --gray-400: #3c4762;
        --gray-500: #6b7280;
        --gray-600: #98a2b3;
        --gray-700: #cbd5e1;
        --gray-800: #e5e7eb;
        --gray-900: #f8fafc;

        --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.35);
        --shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
        --shadow-md: 0 6px 16px rgba(0, 0, 0, 0.45);
        --shadow-lg: 0 12px 24px rgba(0, 0, 0, 0.5);
    }

    body {
        background: linear-gradient(180deg, #0b1220 0%, #0f162a 100%);
        color: var(--gray-800);
    }

    .header {
        background: #0f172a;
        border-bottom: 1px solid var(--gray-300);
    }

    .header button,
    #backToProjects,
    #logoutFromBoard,
    #backToBoard,
    #backToBoardSelect,
    #logoutBtn,
    #logoutFromProject {
        background: #0f172a;
        color: var(--gray-700);
        border: 1px solid var(--gray-300);
        box-shadow: none;
    }
    #exportBtn, #importBtn, #archiveBtn, .btn-primary {
        background: var(--primary-dark) !important;
        color: #fff !important;
    }

    .board-container { background: transparent; }

    .column {
        background: #0f172a;
        border: 1px solid var(--gray-300);
        box-shadow: var(--shadow-sm);
    }
    .column h3 {
        border-bottom: 1px solid var(--gray-300);
        color: var(--gray-700);
    }

    .card {
        background: #0f172a;
        border: 1px solid var(--gray-300);
        box-shadow: var(--shadow-sm);
    }
    .card:hover {
        border-color: var(--primary-light);
        box-shadow: var(--shadow-md);
    }
    .card-title { color: var(--gray-800); }
    .card-description { color: var(--gray-600); }
    .card-footer { border-top: 1px solid var(--gray-300); }

    .action-btn,
    .archive-btn,
    .restore-btn,
    .detail-btn {
        background: #0b1220;
        color: var(--gray-700);
        border: 1px solid var(--gray-300);
    }
    .action-btn:hover,
    .archive-btn:hover,
    .restore-btn:hover,
    .detail-btn:hover { background: #0f172a; }

    .quick-board-card,
    .project-card,
    .board-card {
        background: #0f172a;
        border: 1px solid var(--gray-300);
        box-shadow: var(--shadow-sm);
    }

    .modal-content {
        background: #0f172a;
        border: 1px solid var(--gray-300);
        box-shadow: var(--shadow-lg);
    }
    .edit-modal .modal-header,
    .modal-footer {
        background: #0b1220;
        border-color: var(--gray-300);
        color: var(--gray-700);
    }

    .form-group input,
    .form-group textarea,
    .form-group select,
    .add-card input[type="text"],
    .task-title-input,
    .assignee-select,
    .date-input,
    .inline-title-input,
    .inline-description-textarea,
    .inline-date-input {
        background: #0b1220;
        color: var(--gray-700);
        border: 1px solid var(--gray-300);
    }
    .form-group input::placeholder,
    .form-group textarea::placeholder,
    .task-title-input::placeholder { color: var(--gray-500); }

    .assignee-dropdown {
        background: #0f172a;
        border: 1px solid var(--gray-300);
        box-shadow: var(--shadow);
    }
    .assignee-option { color: var(--gray-700); }
    .assignee-option:hover { background: rgba(59, 130, 246, 0.18); color: #cfe0ff; }
    .assignee-option.selected { background: rgba(59, 130, 246, 0.22); }

    .title-text.clickable:hover,
    .description-text.clickable:hover {
        background: rgba(59, 130, 246, 0.18) !important;
    }
}

/* =============================================
   现代极简主题微调（排版、徽章、悬浮、拖拽提示）
   ============================================= */
/* 排版与标题层级更清晰 */
.card-title {
    font-size: 1rem;
    line-height: 1.5;
    letter-spacing: -0.01em;
}
.card-description {
    color: var(--gray-600);
}

/* 数量徽章更精致 */
.count {
    background: var(--gray-100);
    border: 1px solid var(--gray-300);
    color: var(--gray-700);
    border-radius: 999px;
    padding: 0 0.5rem;
    font-weight: 600;
}

/* 顶部导航与面包屑更稳重 */
.board-breadcrumb, .project-breadcrumb {
    letter-spacing: -0.015em;
}

/* 卡片聚焦与悬浮态更柔和 */
.card:hover {
    transform: translateY(-1px);
}
.card:focus-within {
    border-color: var(--primary-light);
    box-shadow: 0 0 0 3px rgba(59,130,246,0.12);
}

/* 负责人与日期为胶囊样式，交互更明显 */
.card-assignee,
.card-deadline {
    transition: background-color .18s ease, border-color .18s ease, color .18s ease, transform .18s ease;
}
.card-assignee:hover,
.card-deadline:hover {
    transform: translateY(-1px);
}

/* 拖拽提示（有 :has 支持则增强） */
@supports selector(:has(*)) {
    .cards:has(.card.dragging) .card:not(.dragging) {
        opacity: 0.85;
    }
    .column:has(.card.dragging) {
        outline: 2px dashed var(--gray-300);
        outline-offset: 4px;
    }
}
.card.dragging {
    opacity: 0.9;
    transform: scale(0.998);
    box-shadow: var(--shadow-md);
}

/* 顶部添加区域更轻盈 */
.add-card-top {
    background: rgba(0,0,0,0.02);
}
.add-card .keyboard-hint {
    opacity: .7;
}

/* 在线用户徽章间距与样式优化 */
.online-users { border: 1px solid var(--gray-300); background: var(--gray-50); }
#userList .online-user { margin-right: 0.25rem; }

/* 动作区背景轻微毛玻璃（在支持的浏览器） */
.card-center-actions {
    backdrop-filter: saturate(1.1) blur(2px);
    -webkit-backdrop-filter: saturate(1.1) blur(2px);
    padding: 2px 4px;
    border-radius: 8px;
}

/* 暗色模式微调 */
@media (prefers-color-scheme: dark) {
    .count { background: #0b1220; border-color: var(--gray-300); color: var(--gray-700); }
    .online-users { background: #0b1220; border-color: var(--gray-300); }
    .card-center-actions { background: rgba(255,255,255,0.04); }
}

/* 间距：上方添加任务与第一张卡片保持更舒适距离 */
.add-card-top {
    margin-bottom: 0.75rem; /* 分隔顶部添加区与第一张卡片 */
}

/* 拖拽时隐藏中部操作按钮，避免闪烁 */
.card.dragging .card-center-actions { visibility: hidden !important; opacity: 0 !important; }
.dragging-cards .card-center-actions { visibility: hidden !important; opacity: 0 !important; }

/* 红色危险按钮文本对比度修复（始终白字） */
.header .logout-btn,
.header #logoutBtn,
.logout-btn,
#logoutBtn {
    color: #ffffff !important;
    text-shadow: 0 1px 0 rgba(0,0,0,0.12);
}
.header .logout-btn:hover,
.header #logoutBtn:hover { filter: brightness(0.95); }

/* 首页/看板选择页：看板图标与卡片优化 */
.quick-boards-grid { gap: 1.25rem; }
.quick-board-card {
    align-items: center;
    border-radius: var(--border-radius-lg);
    border: 1px solid var(--gray-200);
    box-shadow: var(--shadow-sm);
    transition: var(--transition);
}
.quick-board-card:hover {
    border-color: var(--primary-light);
    box-shadow: var(--shadow-md);
}
.board-icon {
    width: 44px;
    height: 44px;
    font-size: 1.15rem;
    background: linear-gradient(135deg, var(--primary-light), var(--primary-dark));
    box-shadow: 0 4px 12px rgba(59,130,246,0.25), inset 0 -2px 0 rgba(255,255,255,0.18);
    border: none;
}
.quick-board-card:hover .board-icon { transform: translateY(-1px) scale(1.03); }
.board-details h4 { letter-spacing: -0.01em; }
.board-project {
    background: rgba(59,130,246,0.08);
    color: var(--primary-dark);
}

/* 项目卡片微调，与看板卡片风格一致 */
.project-card { border: 1px solid var(--gray-200); box-shadow: var(--shadow-sm); }
.project-card:hover { border-color: var(--primary-light); box-shadow: var(--shadow-md); }

/* 暗色模式下首页样式同步优化 */
@media (prefers-color-scheme: dark) {
    .header .logout-btn,
    .header #logoutBtn,
    .logout-btn,
    #logoutBtn { color: #ffffff !important; text-shadow: none; }

    .quick-board-card,
    .project-card { background: #0f172a; border: 1px solid var(--gray-300); box-shadow: var(--shadow-sm); }
    .quick-board-card:hover,
    .project-card:hover { border-color: var(--primary-light); box-shadow: var(--shadow-md); }

    .board-icon {
        background: linear-gradient(135deg, #3b82f6, #1e40af);
        box-shadow: 0 6px 14px rgba(30,64,175,0.35), inset 0 -2px 0 rgba(0,0,0,0.25);
    }
    .board-project { background: rgba(59,130,246,0.18); color: #cfe0ff; }
}

/* SVG 图标尺寸与配色（继承容器颜色） */
.board-icon svg { width: 22px; height: 22px; display: block; }
.quick-board-card .board-icon { color: #ffffff; }

/* 首页与项目页标题与分区留白优化 */
.dashboard-section h2, .board-section h2 { display: flex; align-items: center; gap: .5rem; }
.dashboard-section { margin-bottom: 2.25rem; }
.board-section { margin-bottom: 2rem; }

/* Prevent board header from wrapping into two lines and align content */
.header > .container { display: flex; flex-wrap: nowrap; }
.board-header-left { flex: 1 1 auto; min-width: 0; }
.header .header-actions { flex: 0 0 auto; display: flex; align-items: center; gap: 1rem; }

/* 图标色彩与区域和谐（更柔和、更现代） */
.dashboard-section h2 [data-icon],
.board-section h2 [data-icon] { color: var(--gray-400); }
.dashboard-section h2 [data-icon] svg,
.board-section h2 [data-icon] svg { width: 20px; height: 20px; }

/* 看板卡片左侧图标：柔和底色 + 主色描边 */
.quick-board-card .board-icon {
    background: rgba(59,130,246,0.10);
    border: 1px solid rgba(59,130,246,0.20);
    color: var(--primary-dark);
    box-shadow: none;
}

/* Board name dropdown caret indicator */
#currentBoardName {
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 2px 6px;
    border-radius: 6px;
    transition: var(--transition);
}
#currentBoardName:hover {
    background: var(--gray-100);
}
#currentBoardName::before {  /* hide built-in caret; use separate #boardCaret */
    content: none !important;
    display: none !important;
}
.quick-board-card:hover .board-icon {
    background: rgba(59,130,246,0.14);
    border-color: rgba(59,130,246,0.28);
}

/* 项目标注更克制，避免颜色冲突 */
.board-project {
    background: var(--gray-100);
    color: var(--gray-600);
    border: 1px solid var(--gray-200);
}

@media (prefers-color-scheme: dark) {
    .dashboard-section h2 [data-icon] { color: var(--gray-600); }
    .quick-board-card .board-icon {
        background: rgba(59,130,246,0.18);
        border-color: rgba(59,130,246,0.28);
        color: var(--primary-light);
    }
    .board-project {
        background: #0b1220;
        color: var(--gray-700);
        border: 1px solid var(--gray-300);
    }
}

/* Match board header height and top alignment with homepage */
#boardPage .header { padding: 0; margin-top: 0; }
#boardPage .header > .container { max-width: 1400px; margin: 0 auto; padding: 2rem 2rem 1rem; display: flex; align-items: center; justify-content: space-between; }
/* #boardPage .board-header-left { display: flex; align-items: center; } */
#boardPage .board-breadcrumb { margin: 0; }

/* Ensure project/board select headers keep their spacing */
#projectPage .project-header { margin-bottom: 2rem; }
#boardSelectPage .board-select-header { margin-bottom: 2rem; }

/* 修复"加入项目"按钮图标大小与对齐 */
.create-board-form button,
.projects-header .btn-primary,
.projects-header .btn-secondary { height: 40px; display: inline-flex; align-items: center; gap: 8px; }
.projects-header .btn-secondary .btn-icon svg { width: 18px; height: 18px; }
.projects-header .btn-primary .btn-icon svg { width: 18px; height: 18px; }

/* Archive page header alignment and compact buttons */
#archivePage .header { padding: 0.75rem 0; }
#archivePage .header > .container { padding: 0 2rem; display: flex; justify-content: space-between; align-items: center; }
#archivePage .header h1 { margin: 0; }
#archivePage .header .header-actions { display: flex; gap: 0.75rem; }
#archivePage .clear-archive-btn { height: 36px; padding: 0 0.875rem; border-radius: 8px; }
/* Ensure danger color and white text inside header (override generic header button) */
#archivePage .header .clear-archive-btn {
    background: var(--danger-color) !important;
    color: #fff !important;
    border: 1px solid transparent;
}
#archivePage .header .clear-archive-btn:hover {
    background: var(--danger-dark) !important;
}

@media (prefers-color-scheme: dark) {
    #archivePage .header .clear-archive-btn {
        background: var(--danger-dark) !important;
        color: #fff !important;
        border-color: transparent;
    }
}

/* 无图标模式：隐藏占位并调整间距 */
/* icons visible globally */
.projects-header .header-actions { gap: 0.75rem; }
.quick-board-card { padding-left: 1.25rem; }

/* 仅隐藏看板卡片内部图标（其他图标保留） */
.quick-board-card .board-icon { display: none !important; }
.projects-header .header-actions { gap: 0.75rem; }
.quick-board-card { padding-left: 1.25rem; }

/* Board and project card icon sizes */
/* Prevent icon flash: hide [data-icon] until injected */
[data-icon]:not(.icon-ready) { visibility: hidden; }

.board-icon { width: 34px; height: 34px; display: inline-flex; align-items: center; justify-content: center; border-radius: 8px; background: var(--primary-color); color: #fff; }
.board-icon svg { width: 18px; height: 18px; }
.project-card .project-icon { display: inline-flex; align-items: center; justify-content: center; width: 18px; height: 18px; margin-right: 6px; }
.project-card .project-icon svg { width: 18px; height: 18px; }

/* Harmonize top navbar buttons on project and board-select pages */
#boardSelectPage .board-select-header .header-actions {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
}
#boardSelectPage .board-select-header .header-actions button {
    background: #ffffff;
    color: var(--gray-700);
    border: 1px solid var(--gray-300);
    border-radius: var(--border-radius);
    height: 36px;
    padding: 0 0.875rem;
    box-shadow: var(--shadow-sm);
    transition: var(--transition);
}
#boardSelectPage .board-select-header .header-actions button:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow);
    border-color: var(--gray-400);
}
#boardSelectPage .board-select-header .header-actions .btn-secondary {
    background: #f3f4f6;
    color: #374151;
    border-color: var(--gray-300);
}
#boardSelectPage .board-select-header .header-actions .btn-secondary:hover {
    background: #e5e7eb;
}
#boardSelectPage .board-select-header .header-actions .btn-danger,
#boardSelectPage .board-select-header .header-actions .logout-btn {
    background: var(--danger-color);
    color: #ffffff;
    border: 1px solid transparent;
    box-shadow: var(--shadow);
}
#boardSelectPage .board-select-header .header-actions .btn-danger:hover,
#boardSelectPage .board-select-header .header-actions .logout-btn:hover {
    background: var(--danger-dark);
}

/* Project page top-right logout button consistency */
#projectPage .project-header .logout-btn {
    height: 36px;
    padding: 0 0.875rem;
    border-radius: var(--border-radius);
    background: var(--danger-color);
    color: #ffffff;
    border: 1px solid transparent;
    box-shadow: var(--shadow-sm);
}
#projectPage .project-header .logout-btn:hover {
    background: var(--danger-dark);
}

/* === Trello-like compact overrides (non-destructive) === */
/* 布局与背景更接近 Trello */
body {
    background: #f5f6f8;
}

#boardPage .header {
    background: transparent;
    box-shadow: none;
    padding: 0; /* rely on inner container for spacing */
}

/* Removed generic .header .container overrides to keep page headers aligned via page-specific rules */

.header-actions button,
.header button,
.btn-primary,
.btn-secondary,
.btn-danger {
    font-size: 12px;
    padding: 6px 10px;
    border-radius: 4px;
    box-shadow: none;
}

.header-actions { gap: 0.5rem; }
.online-users { padding: 4px 8px; font-size: 12px; }
.user-badge { padding: 2px 6px; font-size: 11px; }

.board-container {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 8px 12px;
    overflow-x: auto;
    height: calc(100vh - 64px);
}

/* 列更窄更紧凑 */
.column, .archive-column {
    width: 272px; /* Trello 常见列宽 */
    min-width: 272px;
    max-width: 272px;
    padding: 8px;
    border-radius: 8px;
    background: #ebecf0; /* Trello 列背景 */
    box-shadow: none;
    border: none;
}

.column h3, .archive-column h3 {
    margin: 0 0 8px 4px;
    padding: 0;
    border: none;
    font-size: 14px;
    color: #44546f;
}

.count {
    background: transparent;
    color: #6b778c;
    padding: 0 4px;
    font-size: 12px;
}

/* 卡片更像 Trello：白底、轻边框、少阴影、紧凑间距 */
.cards { gap: 8px; margin-bottom: 8px; }
.card {
    border: 1px solid #dfe1e6;
    box-shadow: none;
    border-radius: 8px;
    padding: 8px 10px;
}

.card:hover { background: #fafbfc; border-color: #c1c7d0; }

.card-title { font-size: 14px; margin-bottom: 6px; }
.card-description { font-size: 12px; color: #6b778c; margin-bottom: 6px; max-height: 100px; }

.card-footer, .card-meta { border-top: none; padding-top: 0; margin-top: 4px; color: #6b778c; font-size: 11px; }

.card-assignee { background: #e9f2ff; color: #0c66e4; font-size: 11px; padding: 2px 6px; border-radius: 12px; }
.card-assignee.unassigned { background: #f4f5f7; color: #97a0af; }

.card-deadline { color: #5e6c84; font-size: 11px; }

/* 顶部 inline 操作按钮只在 hover 时显现，体积更小 */
.card-center-actions { gap: 6px; }
.card-center-actions .action-btn,
.card-center-actions .archive-btn,
.card-center-actions .restore-btn,
.card-center-actions .detail-btn {
    font-size: 12px;
    padding: 4px 6px;
    border-radius: 4px;
}

/* 添加卡片输入区简化 */
.add-card { margin-top: 8px; }
.input-row-inline { gap: 6px; }
.left-inputs { gap: 6px; }
.task-title-input { height: 32px; padding: 0 8px; font-size: 13px; }
.assignee-select, .date-input { height: 32px; font-size: 12px; }

/* 面包屑标题更紧凑 */
.board-breadcrumb { color: #374151; margin: 0; }

/* 归档页面和普通列保持一致风格 */
.archive-container { padding: 12px; }
.archive-column { background: #ebecf0; }

/* 登录与项目页整体字号收紧一点点 */
.login-form input, .login-form button { font-size: 14px; }
.project-header h1, .board-select-header h1, #boardPage .board-breadcrumb { font-size: 20px; }
/* Normalize header title alignment across pages */
.project-header h1, .board-select-header h1 {
    margin: 0 !important;
    text-align: left !important;
    color: #1f2937 !important;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.quick-boards-grid, .projects-grid { gap: 12px; }
.project-card, .quick-board-card { padding: 10px; border-radius: 8px; }

/* 辅助色调更低干扰 */
.title-text.clickable:hover, .description-text.clickable:hover { background: #e9f2ff !important; }
.card-assignee.clickable:hover { background: #e1ecff !important; transform: none !important; }

/* 滚动优化：列容器可滚动，卡片区域填充剩余高度 */
.column { max-height: calc(100vh - 88px); overflow-y: auto; }

/* === Trello-like refinements (phase 2) === */
:root {
    --board-bg-url: none; /* e.g., url('https://images.unsplash.com/photo-...') */
}

/* 可选：看板背景图（与 Trello 类似的全屏背景） */
#boardPage {
    background-image: var(--board-bg-url);
    background-position: center center;
    background-size: cover;
    background-repeat: no-repeat;
    background-attachment: fixed;
}

/* 头部保持单行并收紧 */
#boardPage .header .container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
    flex-wrap: nowrap;
}

/* .board-header-left { flex: 1 1 auto; min-width: 0; display: flex; align-items: center; } */
.board-breadcrumb { display: inline-flex; align-items: center; gap: 6px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.header-actions { flex: 0 0 auto; flex-wrap: nowrap; }

/* 列更接近 Trello 的视觉（浅灰半透明 + 细边框） */
.column, .archive-column {
    background: rgba(241, 242, 244, 0.92);
    border: 1px solid #dfe1e6;
}

/* 卡片 hover 更克制 */
.card:hover {
    transform: none;
    box-shadow: none;
}

/* 拖拽时隐藏中部按钮避免闪烁 */
.card.dragging .card-center-actions,
.dragging-cards .card-center-actions {
    visibility: hidden !important;
    opacity: 0 !important;
}

/* 退出按钮的对比度修正 */
.header .logout-btn,
.header #logoutBtn,
.logout-btn,
#logoutBtn {
    color: #ffffff !important;
    text-shadow: 0 1px 0 rgba(0,0,0,0.12);
}
.header .logout-btn:hover,
.header #logoutBtn:hover { filter: brightness(0.95); }

/* === Trello design tokens & minimal card UI === */
:root{
    --list-width:272px;
    --list-gap:12px;
    --card-radius:10px;
    --card-padding:10px;
    --card-shadow:0 1px 0 rgba(9,30,66,.25);
    --card-hover-shadow:0 4px 8px rgba(9,30,66,.25);
    --badge-gap:6px;
    --label-height:8px;
    --muted:#6b7280;
    --border:#e5e7eb;
    --bg:#f6f7f9;
    --card-bg:#fff;
}

/* board/list */
.board-container{ display:flex; gap:var(--list-gap); padding:12px; overflow:auto; background:var(--bg); height:calc(100vh - 64px); }
.column{ width:var(--list-width); min-width:var(--list-width); max-width:var(--list-width); background:transparent; box-shadow:none; padding:0; border:none; }
.column h3{ margin:6px 6px 8px; padding:0; border:none; font-size:14px; }
.cards{ display:flex; flex-direction:column; gap:8px; padding:0 6px 8px; }

/* minimal card front */
.card{ background:var(--card-bg); border-radius:var(--card-radius); box-shadow:var(--card-shadow); padding:var(--card-padding); border:1px solid var(--border); }
.card:hover{ box-shadow:var(--card-hover-shadow); }
.card .card-title{ font-size:14.5px; font-weight:600; line-height:1.3; display:-webkit-box; -webkit-line-clamp:3; -webkit-box-orient:vertical; overflow:hidden; margin:0; }
.card .card-description{ display:none !important; }
.card .card-footer{ display:none !important; }

.card-labels{ display:flex; gap:4px; margin-bottom:6px; min-height:var(--label-height); }
.label{ height:var(--label-height); border-radius:6px; flex:0 0 36px; }
.label-red{ background:#f87171; } .label-green{ background:#34d399; }
.label-blue{ background:#60a5fa; } .label-yellow{ background:#fbbf24; } .label-purple{ background:#a78bfa; }

.card-badges{ display:flex; flex-wrap:wrap; gap:var(--badge-gap); margin-top:6px; color:var(--muted); font-size:12px; }
.badge{ display:inline-flex; align-items:center; gap:4px; }
.badge-user{ width:20px; height:20px; border-radius:50%; background:#111; color:#fff; justify-content:center; font-size:11px; }
.badge-due.overdue{ color:#ef4444; }
.badge-due.soon{ color:#f59e0b; }

.card-quick{ position:absolute; top:6px; right:6px; opacity:0; transition:opacity .12s; border:0; background:transparent; font-size:18px; line-height:1; cursor:pointer; }
.card:hover .card-quick{ opacity:1; }

/* drawer modal (right panel) */
#cardModal[hidden]{ display:none; }
#cardModal{ position:fixed; inset:0; z-index:1100; }
#cardModal .modal-backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.35); }
#cardModal .modal-panel{ position:absolute; right:0; top:0; height:100%; width:min(720px, 92vw); background:#fff; box-shadow:-8px 0 24px rgba(0,0,0,.2); padding:20px; overflow:auto; transform:translateX(100%); transition:transform .15s ease-out; }
#cardModal.open .modal-panel{ transform:translateX(0); }

/* drawer content sections */
.drawer-section{ margin-bottom:16px; }
.drawer-section h4{ font-size:14px; margin:0 0 8px; color:#111827; }
.drawer-row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
.drawer-row input[type="text"], .drawer-row textarea, .drawer-row select, .drawer-row input[type="date"]{ width:100%; padding:10px; border:1px solid var(--border); border-radius:8px; font-size:14px; }
.drawer-row textarea{ min-height:120px; resize:vertical; }
.drawer-labels{ display:flex; gap:8px; flex-wrap:wrap; }
.drawer-label{ width:28px; height:16px; border-radius:6px; cursor:pointer; border:1px solid rgba(17,24,39,.08); }
.drawer-badges{ display:flex; gap:8px; color:var(--muted); font-size:12px; }

/* util */
.visually-hidden{ position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }

/* === Minimal Trello-like card and collapsed add form (compact) === */
.card {
    background-color: #FFFFFF;
    border-radius: 8px;
    padding: 8px 10px;
    margin-bottom: 8px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    cursor: pointer;
    position: relative;
}
.card:hover { box-shadow: 0 2px 4px rgba(0,0,0,0.15); }

/* title clamp to 3 lines */
.card .card-title { margin: 0; font-size: 14px; font-weight: 600; line-height: 1.3; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
/* hide verbose areas from old layout */
.card .card-description, .card .card-footer { display: none !important; }

/* badges (icons only) */
.card-badges { display:flex; align-items:center; gap:8px; margin-top:6px; color:#6b7280; font-size:12px; }
.badge-icon { display:inline-flex; align-items:center; justify-content:center; width:18px; height:18px; border-radius:4px; }
.badge-icon.due.overdue { color: #ef4444; }
.badge-user { width:20px; height:20px; border-radius:50%; background:#111827; color:#fff; display:inline-flex; align-items:center; justify-content:center; font-size:11px; margin-left:auto; }

/* hover pencil */
.card-quick { position:absolute; top:6px; right:6px; opacity:0; transition:opacity .12s; border:0; background:transparent; font-size:16px; line-height:1; cursor:pointer; }
.card:hover .card-quick { opacity:1; }

/* collapsed add card */
.add-card.collapsed .input-row-inline { display: none; }
.add-card.collapsed .add-card-link { display: inline-block; }
.add-card .add-card-link { display:none; color:#0c66e4; background:transparent; border:0; padding:4px 6px; cursor:pointer; font-size:13px; }
.add-card .add-card-link:hover { text-decoration: underline; }

/* === Trello-like lists & composer visuals === */
.list { background: #ebecf0; border: 1px solid #dfe1e6; border-radius: 8px; padding: 8px; width: var(--list-width); min-width: var(--list-width); max-width: var(--list-width); display:flex; flex-direction:column; gap:8px; }
.list-header { display:flex; align-items:center; justify-content:space-between; margin: 2px 4px 6px; cursor: grab; -webkit-user-select: none; user-select: none; -webkit-user-drag: element; }
.list-title { font-size: 14px; font-weight:600; margin:0; }
.list-title-input { width:100%; padding:6px 8px; border:1px solid var(--border); border-radius:6px; font-weight:600; background:#fff; }
.list-menu { width:28px; height:28px; border:0; background:transparent; border-radius:6px; color:#6b778c; cursor:pointer; }
.list-menu:hover { background:rgba(9,30,66,.08); }

.cards { display:flex; flex-direction:column; gap:8px; }

/* composer inside list */
.card-composer { margin-top:auto; }
.card-composer .composer-open { display:inline-block; color:#0c66e4; background:transparent; border:0; padding:6px 8px; border-radius:6px; cursor:pointer; font-size:13px; }
.card-composer .composer-open:hover { background:rgba(9,30,66,.06); }
.card-composer .composer[hidden] { display:none; }
.card-composer textarea { width:100%; min-height:72px; border:1px solid var(--border); border-radius:8px; padding:8px 10px; font-size:14px; resize:vertical; box-shadow:0 1px 0 rgba(9,30,66,.1); background:#fff; }
.card-composer .composer-actions { display:flex; align-items:center; gap:8px; margin-top:6px; }
.card-composer .btn-primary { padding:6px 10px; border-radius:6px; border:0; background:#0c66e4; color:#fff; }
.card-composer .composer-cancel { width:28px; height:28px; border:0; border-radius:6px; background:transparent; cursor:pointer; color:#0c66e4; font-weight:700; font-size:18px; }
.card-composer .composer-cancel:hover { background:rgba(12,102,228,.10); color:#0b5bd7; }

/* add another list entry */
.add-list { background: transparent; border:0; border-radius:8px; width: var(--list-width); min-width: var(--list-width); max-width: var(--list-width); display:flex; align-items:flex-start; }
.add-list .add-list-open { width:100%; min-height:40px; text-align:left; background:rgba(236,238,240,.8); border:1px dashed #dfe1e6; border-radius:8px; color:#0c66e4; padding:8px 10px; cursor:pointer; }
.add-list .add-list-open:hover { background:rgba(236,238,240,1); }
.add-list .add-list-form { width:100%; }
.add-list .add-list-form input { width:100%; height:36px; border:1px solid var(--border); border-radius:8px; padding:0 10px; }
.add-list .actions { display:flex; gap:8px; margin-top:6px; }
.add-list .actions .btn-primary { padding:6px 10px; border-radius:6px; border:0; background:#0c66e4; color:#fff; }
.add-list .add-list-cancel { padding:6px 10px; border-radius:6px; border:0; background:transparent; }

/* inline card title input */
.card-title-input { width:100%; border:1px solid var(--border); border-radius:6px; padding:2px 8px 6px; font-size:14px; font-weight:600; line-height: 1.28; resize: none; overflow: hidden; }

/* title spacing and button alignment */
.card .card-title { padding-right: 28px; display: block; }
.card-quick { top: 2px; line-height: 1; }

/* tighten card spacing and list paddings */
.board-container { gap: var(--list-gap); padding: 12px; }
.list { padding: 6px; gap: 6px; }
.cards { gap: 6px; }
.card { padding: 8px 10px; margin-bottom: 6px; }
/* reduce distance from card to list border */
.list .cards { padding: 2px; }

/* composer sits right after last card, compact paddings */
.card-composer { margin-top: 0; }
.card-composer textarea { min-height: 56px; padding: 8px; }
.card-composer .btn-primary { height: 32px; }
.card-composer .composer-open { width: 100%; text-align: left; color:#0c66e4; }

/* hover pencil / open-details button */
.card-quick { position:absolute; top:6px; right:6px; opacity:0; transition:opacity .12s; border:0; background:transparent; font-size:16px; line-height:1; cursor:pointer; color:#44546f; }
.card:hover .card-quick { opacity:1; }

/* add-card open button matches list background */
.card-composer .composer-open { width: 100%; text-align: left; color:#44546f; background: #ebecf0; border: 1px dashed #dfe1e6; }
.card-composer .composer-open:hover { background:#e3e5e9; }

/* composer state toggle */
.card-composer:not(.is-open) .composer { display:none; }
.card-composer.is-open .composer-open { display:none; }

/* list dragging visual */
.list.dragging { transform: rotate(1.5deg) scale(1.02); box-shadow: 0 8px 16px rgba(9,30,66,.25); opacity: .98; cursor: grabbing; }

.list-placeholder { background: rgba(236,238,240,.8); border: 2px dashed #d0d4da; border-radius: 8px; box-shadow: inset 0 0 0 2px rgba(9,30,66,.05), 0 4px 8px rgba(9,30,66,.12); }

/* textual assignee and deadline chips (previous style) */
.card-badges { display:flex; flex-wrap:wrap; gap:8px; align-items:center; }
.card-assignee { font-weight:500; color:#0c66e4; background:#e9f2ff; padding:2px 8px; border-radius:12px; font-size:12px; border:2px solid transparent; }
.card-assignee.unassigned { color:#97a0af; background:#f4f5f7; }
.card-deadline { background:#f4f5f7; color:#57606a; padding:2px 8px; border-radius:12px; font-size:12px; border:2px solid transparent; display:inline-flex; align-items:center; min-height:22px; }
.card-deadline.unset { color:#97a0af; }
.card-assignee.clickable:hover { background:#e1ecff !important; }
.card-deadline.clickable:hover { background:#e9ecef !important; }

/* === Compact card height tweaks === */
.cards { gap: 4px; }
.list { padding: 4px; }
.card { padding: 6px 8px; margin-bottom: 4px; }
.card .card-title { font-size: 13.5px; line-height: 1.25; -webkit-line-clamp: 2; }
.card-badges { gap: 6px; margin-top: 4px; }
.card-assignee, .card-deadline { padding: 1px 6px; font-size: 11px; min-height: 18px; }

/* place composer right after last card */
.list .cards { flex: 0 0 auto; }

/* blend add-card button with list background */
.card-composer { margin-top: 0; padding: 4px 6px; background: transparent; }
.card-composer .composer-open { display:inline-flex; align-items:center; gap:6px; width:100%; text-align:left; color:#44546f; background: transparent; border: 0; padding:6px 8px; border-radius:6px; }
.card-composer .composer-open::before { content:'+'; font-weight:600; }
.card-composer .composer-open:hover { background: rgba(9,30,66,.06); }

/* card dragging placeholder */
.card-placeholder { background: rgba(236,238,240,.6); border: 2px dashed #d0d4da; border-radius: 10px; box-shadow: inset 0 0 0 2px rgba(9,30,66,.05), 0 3px 6px rgba(9,30,66,.12); }

/* replace icons: list menu delete X and edit pencil */
.list .list-header .list-menu { color: #ef4444; font-weight: 700; }
.list .list-header .list-menu::before { content: '×'; font-size: 16px; }
.list .list-header .list-menu { width: 28px; height: 28px; display:flex; align-items:center; justify-content:center; }

/* card edit pencil (left arrow-like) */
.card-quick { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
.card-quick::before { content: '✎'; }

/* remove dashed border for add buttons */
.add-list .add-list-open { border: 0; background: rgba(236,238,240,.8); }
.card-composer .composer-open { border: 0; }

/* extra-compact card top spacing */
.card { padding-top: 4px; padding-bottom: 6px; }

/* list delete button hover only */
.list .list-header .list-menu { opacity: 0; transition: opacity .12s; }
.list:hover .list-header .list-menu { opacity: 1; }

/* deadline chip remove emoji spacing */
.card-deadline { padding-left: 6px; }

/* card edit pencil left-oriented */
.card-quick { width:24px; height:24px; display:inline-flex; align-items:center; justify-content:center; background:transparent; border:0; }
.card-quick::before { content: ''; }
.card-quick { mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 7L17 10L9 18H6V15L14 7Z" fill="black"/></svg>') no-repeat center / 16px 16px; -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 7L17 10L9 18H6V15L14 7Z\" fill=\"black\"/></svg>') no-repeat center / 16px 16px; background-color:#44546f; }
.card:hover .card-quick { background-color:#2e3a59; }

/* hide empty labels container */
.card-labels:empty { display: none !important; }

/* left align lists (columns) */
.board-container { justify-content: center; }

/* header alignment like home/project: left title, right buttons */
.header > .container { display: flex; justify-content: space-between; align-items: center; flex-wrap: nowrap; }
#boardPage .header .container { display: flex; justify-content: space-between; align-items: center; gap: 0.5rem; flex-wrap: nowrap; }


/* refined: only date/user align right; keep other badges left */
.card .card-badges { justify-content: flex-start; }
.card .card-badges:has(.card-deadline) .card-deadline { margin-left: auto; }
.card .card-badges:not(:has(.card-deadline)) .card-assignee { margin-left: auto; }
/* lower title a bit more */
.card .card-title { margin-top: 6px; }

#boardPage .header {
    background: transparent;
    box-shadow: none;
    padding: 0;
    margin-top: 0;
    margin-bottom: 2rem;
    border-bottom: 2px solid #e5e7eb;
}
#boardPage .header > .container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem 2rem 1rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
}
#boardPage .board-header-left { min-width: 0; }
#boardPage .board-breadcrumb { margin: 0; text-align: left; /* keep title left */ white-space: nowrap; overflow: hidden; text-overflow: ellipsis; /* prevent title from taking too much width */ }

/* Board switcher dropdown */
.board-switcher-menu {
    position: fixed;
    z-index: 1000;
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    box-shadow: var(--shadow-lg);
    min-width: 260px;
    max-width: 360px;
    max-height: 380px;
    overflow: auto;
}
.board-switcher-header {
    display: flex;
    gap: 8px;
    align-items: center;
    padding: 8px;
    border-bottom: 1px solid #e5e7eb;
    position: sticky;
    top: 0;
    background: inherit;
}
.board-switcher-search {
    flex: 1;
    height: 32px;
    padding: 0 10px;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    font-size: 13px;
}
.board-switcher-create {
    height: 32px;
    padding: 0 10px;
    border: 1px solid var(--gray-300);
    background: #f3f4f6;
    color: #374151;
    border-radius: 6px;
    cursor: pointer;
}
.board-switcher-create:hover { background: #e5e7eb; }
.board-switcher-create:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    background: #f3f4f6;
    color: #9ca3af;
}

.board-switcher-list { padding: 6px 0; }
.board-switcher-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    padding: 8px 12px;
    cursor: pointer;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.board-switcher-item:hover { background: #f3f4f6; }
.board-switcher-item.active { background: #eff6ff; color: #1d4ed8; font-weight: 600; }
.board-switcher-label { overflow: hidden; text-overflow: ellipsis; }
.board-switcher-actions { display: inline-flex; gap: 4px; flex-shrink: 0; }
.board-switcher-rename { width: 22px; height: 22px; border: 1px solid #e5e7eb; border-radius: 4px; background: #fff; color: #64748b; cursor: pointer; }
.board-switcher-rename:hover { background: #fff; color: #374151; border-color: #d1d5db; }
.board-switcher-empty { padding: 16px; text-align: center; color: #6b7280; }

@media (prefers-color-scheme: dark) {
    .board-switcher-menu { background: #0f172a; border-color: var(--gray-300); }
    .board-switcher-header { border-bottom-color: var(--gray-300); }
    .board-switcher-search { background: #0b1220; color: #e5e7eb; border-color: var(--gray-300); }
    .board-switcher-create { background: #111827; color: #e5e7eb; border-color: var(--gray-300); }
    .board-switcher-create:hover { background: #1f2937; }
    .board-switcher-create:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        background: #111827;
        color: #6b7280;
    }
    .board-switcher-item:hover { background: #111827; }
    .board-switcher-item.active { background: #112042; color: #93c5fd; }
    .board-switcher-rename { background: #0f172a; color: #9ca3af; border-color: var(--gray-300); }
    .board-switcher-rename:hover { background: #111827; color: #e5e7eb; border-color: var(--gray-300); }
}

/* Toasts */
.toast-container {
    position: fixed;
    right: 16px;
    bottom: 16px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    z-index: 1100;
}
.toast {
    background: rgba(17, 24, 39, 0.96);
    color: #fff;
    padding: 10px 14px;
    border-radius: 8px;
    box-shadow: var(--shadow-lg);
    transform: translateY(8px);
    opacity: 0;
    transition: all .25s ease;
    max-width: 320px;
}
.toast.show { transform: translateY(0); opacity: 1; }
.toast-success { background: #047857; }
.toast-error { background: #b91c1c; }
.toast-info { background: #1f2937; }

/* Ensure modal-header generic class shares styles */
.modal-header { background: #f8fafc; border-bottom: 1px solid #e2e8f0; color: #1e293b; padding: 1rem 1.5rem; display: flex; justify-content: space-between; align-items: center; }

@media (prefers-color-scheme: dark) {
    .toast { background: rgba(0,0,0,.85); }
    .toast-info { background: #111827; }
}

/* archive quick button on card - compact, neutral */
.card-quick-archive {
    position: absolute;
    top: 2px; /* align with .card-quick */
    right: 36px; /* 6px gap from edit (24px icon + 6px) */
    width: 24px;
    height: 24px;
    border: 1px solid transparent;
    border-radius: 6px;
    background-color: transparent;
    cursor: pointer;
    opacity: 0;
    transition: opacity .12s, background-color .12s, box-shadow .12s, border-color .12s, color .12s;
    /* use SVG background for icon so hover background is visible */
    mask: none; -webkit-mask: none;
    background-repeat: no-repeat;
    background-position: center;
    background-size: 16px 16px;
    color: #6b7280; /* icon color */
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M9 16.17l-3.88-3.88-1.41 1.41L9 19 20.29 7.71l-1.41-1.41z"/></svg>');
}
.card:hover .card-quick-archive { opacity: 1; }
.card-quick-archive:hover { background-color: #eef2ff; border-color: #c7d2fe; box-shadow: 0 2px 6px rgba(0,0,0,0.18); color: #1e40af; }

@media (prefers-color-scheme: dark) {
    .card-quick-archive { color: #cbd5e1; }
    .card-quick-archive:hover { background-color: rgba(255,255,255,0.08); border-color: var(--gray-300); box-shadow: 0 2px 6px rgba(0,0,0,0.45); color: #93c5fd; }
}

/* Archive page refinements */
.archive-container {
    max-width: 920px;
    padding: 16px;
}
.archive-column {
    background: #ffffff;
    border: 1px solid var(--gray-200);
    border-radius: 12px;
    box-shadow: var(--shadow-sm);
    padding: 12px;
}
.archive-column h3 {
    margin: 0 0 10px 0;
    padding: 0 0 8px 0;
    border-bottom: 1px solid var(--gray-200);
    color: #374151;
}
.archive-column .cards { gap: 8px; }
.archive-column .card { background: #fff; border: 1px solid var(--gray-200); opacity: 1; }
.archive-column .card:hover { background: #fafafa; }

/* empty state alignment */
#archivedCards:empty::before {
    content: '暂无归档任务';
    display: block;
    text-align: center;
    color: #6b7280;
    padding: 24px 0;
}

/* Dark mode tweaks for archive */
@media (prefers-color-scheme: dark) {
    .card-quick-archive { background: #d97706; }
    .archive-column { background: #0f172a; border-color: var(--gray-300); box-shadow: var(--shadow-sm); }
    .archive-column h3 { border-bottom-color: var(--gray-300); color: var(--gray-700); }
    #archivedCards:empty::before { color: var(--gray-700); }
}

/* restore chip on archived cards */
.card-actions-row { margin-top: 8px; display: flex; justify-content: flex-end; }
.restore-chip { height: 26px; padding: 0 10px; border-radius: 6px; border: 1px solid var(--gray-300); background: #f3f4f6; color: #374151; cursor: pointer; font-size: 12px; }
.restore-chip:hover { background: #e5e7eb; }

/* Archive page header (align with project header) */
#archivePage .header {
    background: #ffffff;
    border-bottom: 1px solid var(--gray-200);
    padding: 0.75rem 0;
}
#archivePage .header > .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
#archivePage .header h1 { font-size: 20px; margin: 0; color: #1f2937; }
#archivePage .header .header-actions { display: flex; gap: 0.75rem; }

@media (prefers-color-scheme: dark) {
    #archivePage .header { background: #0f172a; border-bottom-color: var(--gray-300); }
    #archivePage .header h1 { color: var(--gray-700); }
}

/* === Final overrides: unify quick icons alignment and hover visuals (refined) === */
.card-quick,
.card-quick-archive {
    position: absolute;
    top: 6px; /* align to original edit button baseline */
    width: 24px;
    height: 24px;
    border-radius: 6px;
    opacity: 0;
    transition: opacity .12s, background-color .12s, border-color .12s, box-shadow .12s, color .12s;
    border: 1px solid transparent;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    color: #64748b; /* neutral icon */
}
.card:hover .card-quick,
.card:hover .card-quick-archive { opacity: 1; }

/* Edit (pencil) */
.card-quick {
    right: 6px;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a1.003 1.003 0 0 0 0-1.42L18.37 3.29a1.003 1.003 0 0 0-1.42 0l-1.83 1.83 3.75 3.75 1.84-1.83z"/></svg>');
    background-repeat: no-repeat;
    background-position: center;
    background-size: 16px 16px;
}

/* Archive (check) */
.card-quick-archive {
    right: 36px; /* 6px gap from edit */
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M9 16.17l-3.88-3.88-1.41 1.41L9 19 20.29 7.71l-1.41-1.41z"/></svg>');
    background-repeat: no-repeat;
    background-position: center;
    background-size: 16px 16px;
}

/* Hover/Focus visuals: soft blue, clear on white backgrounds */
.card-quick:hover,
.card-quick-archive:hover { background-color: #eef2ff; border-color: #dbeafe; box-shadow: 0 2px 6px rgba(0,0,0,0.12); color: #1e40af; }
.card-quick:focus-visible,
.card-quick-archive:focus-visible { outline: none; background-color: #e8edff; border-color: #c7d2fe; box-shadow: 0 0 0 3px rgba(99,102,241,0.18); color: #1e3a8a; }
.card-quick:focus,
.card-quick-archive:focus { outline: none; background-color: #e8edff; border-color: #c7d2fe; box-shadow: 0 0 0 3px rgba(99,102,241,0.18); color: #1e3a8a; }

@media (prefers-color-scheme: dark) {
    .card-quick,
    .card-quick-archive { color: #cbd5e1; }
    .card-quick:hover,
    .card-quick-archive:hover { background-color: rgba(255,255,255,0.08); border-color: var(--gray-300); box-shadow: 0 2px 6px rgba(0,0,0,0.45); color: #93c5fd; }
    .card-quick:focus-visible,
    .card-quick-archive:focus-visible { background-color: rgba(255,255,255,0.10); border-color: var(--gray-300); box-shadow: 0 0 0 3px rgba(99,102,241,0.28); color: #bfdbfe; }
}

/* Fix legacy mask and enforce hover/focus for quick actions */
.card-quick { -webkit-mask: none; mask: none; }
.card:hover .card-quick,
.card:hover .card-quick-archive { background-color: #eef2ff; border-color: #dbeafe; box-shadow: 0 2px 6px rgba(0,0,0,0.12); color: #1e40af; }
.card:hover .card-quick:focus,
.card:hover .card-quick:focus-visible,
.card:hover .card-quick-archive:focus,
.card:hover .card-quick-archive:focus-visible { outline: none; background-color: #e8edff; border-color: #c7d2fe; box-shadow: 0 0 0 3px rgba(99,102,241,0.18); color: #1e3a8a; }
@media (prefers-color-scheme: dark) {
    .card:hover .card-quick,
    .card:hover .card-quick-archive { background-color: rgba(255,255,255,0.08); border-color: var(--gray-300); box-shadow: 0 2px 6px rgba(0,0,0,0.45); color: #93c5fd; }
    .card:hover .card-quick:focus,
    .card:hover .card-quick:focus-visible,
    .card:hover .card-quick-archive:focus,
    .card:hover .card-quick-archive:focus-visible { background-color: rgba(255,255,255,0.10); border-color: var(--gray-300); box-shadow: 0 0 0 3px rgba(99,102,241,0.28); color: #bfdbfe; }
}

/* === Archive page visual polish === */
#archivePage .archive-container { max-width: 960px; margin: 0 auto; padding: 16px 12px; }
#archivePage .archive-column { padding: 16px; border-radius: 12px; border: 1px solid var(--gray-200); background: #fff; box-shadow: var(--shadow-sm); }
#archivePage .archive-column h3 { display: flex; align-items: center; justify-content: space-between; margin: 0 0 10px 0; padding-bottom: 8px; border-bottom: 1px solid var(--gray-200); color: #1f2937; }
#archivePage .archive-column h3 .count { background: #eef2ff; color: #1e40af; border: 1px solid #dbeafe; }
#archivedCards.cards { display: flex; flex-direction: column; gap: 0.75rem; }
#archivedCards .card { opacity: 1; background: #fff; border: 1px solid var(--gray-200); border-radius: var(--border-radius-lg); padding: 1rem; box-shadow: var(--shadow-sm); transition: border-color .12s, box-shadow .12s, transform .12s; }
#archivedCards .card:hover { border-color: var(--primary-light); box-shadow: var(--shadow-md); transform: translateY(-1px); }
#archivedCards .restore-chip { background: #eef2ff; border-color: #dbeafe; color: #1e40af; }
#archivedCards .restore-chip:hover { background: #e0e7ff; border-color: #c7d2fe; color: #1e3a8a; box-shadow: var(--shadow-sm); }

@media (prefers-color-scheme: dark) {
  #archivePage .archive-column { background: #0f172a; border-color: var(--gray-300); box-shadow: var(--shadow-sm); }
  #archivePage .archive-column h3 { border-bottom-color: var(--gray-300); color: var(--gray-700); }
  #archivePage .archive-column h3 .count { background: rgba(255,255,255,0.08); color: #93c5fd; border-color: var(--gray-300); }
  #archivedCards .card { background: #0f172a; border-color: var(--gray-300); box-shadow: var(--shadow-sm); }
  #archivedCards .card:hover { border-color: var(--primary-light); box-shadow: var(--shadow-md); }
}

/* Owner label positioning for cards */
.quick-board-card,
.project-card {
    position: relative;
}
.card-owner {
    position: absolute;
    right: 14px;
    bottom: 10px;
    color: #64748b;
    font-size: 12px;
    background: transparent;
    pointer-events: none;
    opacity: 0;
    transition: opacity .15s ease;
}
.quick-board-card:hover .card-owner,
.project-card:hover .card-owner,
.board-card-with-actions:hover .card-owner { opacity: 1; }

/* Center archive layout and prevent header button wrapping */
#archivePage .header .header-actions button { white-space: nowrap; display: inline-flex; align-items: center; }
#archivePage .archive-container { max-width: none; margin: 0; padding: 1.5rem 2rem; display: block; }
#archivePage .archive-column { width: 100%; min-height: 500px; }

/* inline actions in archived cards */
.actions-inline { display: inline-flex; gap: 8px; }
.delete-chip { height: 26px; padding: 0 10px; border-radius: 6px; border: 1px solid #fecaca; background: #fee2e2; color: #b91c1c; cursor: pointer; font-size: 12px; }
.delete-chip:hover { background: #fecaca; border-color: #fca5a5; color: #991b1b; box-shadow: var(--shadow-sm); }

/* Project boards: side-by-side tools (create board + invite info) */
#boardSelectPage .board-select-tools {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 1rem;
    align-items: stretch;
    margin-bottom: 1.5rem;
}
@media (max-width: 900px) {
  #boardSelectPage .board-select-tools { grid-template-columns: 1fr; }
}
#boardSelectPage .board-select-tools .board-section { margin-bottom: 0; }
.project-info-inline p { margin: 0 0 8px 0; }

@media (prefers-color-scheme: dark) {
  .delete-chip { background: rgba(239,68,68,0.18); border-color: var(--gray-300); color: #fca5a5; }
  .delete-chip:hover { background: rgba(239,68,68,0.28); border-color: var(--gray-300); color: #fecaca; }
}

/* Quick delete icon for archived cards */
.card-quick-delete {
    position: absolute;
    top: 6px;
    right: 36px; /* place just left of edit, same gap as archive */
    width: 24px;
    height: 24px;
    border-radius: 6px;
    border: 1px solid transparent;
    background: transparent;
    cursor: pointer;
    opacity: 0;
    transition: opacity .12s, background-color .12s, border-color .12s, box-shadow .12s, color .12s;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/></svg>');
    background-repeat: no-repeat;
    background-position: center;
    background-size: 16px 16px;
    color: #ef4444;
}
.card:hover .card-quick-delete { opacity: 1; background-color: #fee2e2; border-color: #fecaca; color: #b91c1c; }
.card-quick-delete:hover { background-color: #fee2e2; border-color: #fecaca; box-shadow: 0 2px 6px rgba(0,0,0,0.12); color: #b91c1c; }
.card-quick-delete:focus, .card-quick-delete:focus-visible { outline: none; background-color: #fecaca; border-color: #fca5a5; box-shadow: 0 0 0 3px rgba(239,68,68,0.18); color: #991b1b; }

@media (prefers-color-scheme: dark) {
  .card-quick-delete { color: #cbd5e1; }
  .card:hover .card-quick-delete { background-color: rgba(239,68,68,0.18); border-color: var(--gray-300); box-shadow: 0 2px 6px rgba(0,0,0,0.45); color: #fca5a5; }
  .card-quick-delete:hover { background-color: rgba(239,68,68,0.18); border-color: var(--gray-300); color: #fca5a5; }
  .card-quick-delete:focus, .card-quick-delete:focus-visible { background-color: rgba(239,68,68,0.24); border-color: var(--gray-300); box-shadow: 0 0 0 3px rgba(239,68,68,0.28); color: #fecaca; }
}

/* list header actions */
.list-header { display:flex; align-items:center; justify-content:space-between; }
.list-actions { display:inline-flex; align-items:center; gap:0px; }
.list-archive, .list-menu {
    width:28px; height:28px; border:0;
    background:transparent; border-radius:6px;
    cursor:pointer; display:inline-flex;
    align-items:center; justify-content:center;
    transition:background-color .12s, box-shadow .12s, border-color .12s, color .12s;
 }
.list-archive {
    border:1px solid transparent;
    color:#64748b;
    background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M9 16.17l-3.88-3.88-1.41 1.41L9 19 20.29 7.71l-1.41-1.41z"/></svg>');
    background-repeat:no-repeat; background-position:center;
    background-size:16px 16px;
}
.list-archive:focus {
    border:1px solid transparent;
    /* color: #f59e0b; */
    /* background: rgba(200,30,66,.08); */
    /* background:rgba(9,30,66,.08); */

    background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M9 16.17l-3.88-3.88-1.41 1.41L9 19 20.29 7.71l-1.41-1.41z"/></svg>');
    background-repeat:no-repeat;
    background-position:center;
    background-size:16px 16px;
 }
/* .list-archive:hover { background:#eef2ff; border-color:#dbeafe; box-shadow:0 2px 6px rgba(0,0,0,0.12); color:#1e40af; } */
/* .list-archive:focus, .list-archive:focus-visible { outline:none; background:#e8edff; border-color:#c7d2fe; box-shadow:0 0 0 3px rgba(99,102,241,0.18); color:#1e3a8a; } */

  /* .list-archive:hover { background:rgba(255,255,255,0.08); border-color:var(--gray-300); box-shadow:0 2px 6px rgba(0,0,0,0.45); color:#93c5fd; } */


  .list-archive:hover {
    background:rgba(9,30,66,.08);
    /* border-color:var(--gray-300); */
    /* box-shadow:0 2px 6px rgba(0,0,0,0.45); */
    /* color:#93c5fd; */
    background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M9 16.17l-3.88-3.88-1.41 1.41L9 19 20.29 7.71l-1.41-1.41z"/></svg>');
    background-repeat:no-repeat;
    background-position:center;
    background-size:16px 16px;
}


/* .list-archive::before { */
    /* content: '✓'; Check icon for archive */
    /* font-size: 16px; */
    /* background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M9 16.17l-3.88-3.88-1.41 1.41L9 19 20.29 7.71l-1.41-1.41z"/></svg>'); */
/* } */


@media (prefers-color-scheme: dark) {
  .list-archive { color:#cbd5e1; }
  /* .list-archive:hover { background:rgba(255,255,255,0.08); border-color:var(--gray-300); box-shadow:0 2px 6px rgba(0,0,0,0.45); color:#93c5fd; } */
  /* .list-archive:focus, .list-archive:focus-visible { background:rgba(255,255,255,0.10); border-color:var(--gray-300); box-shadow:0 0 0 3px rgba(99,102,241,0.28); color:#bfdbfe; } */
}

/* Hide list header actions until hover */
.list-actions { opacity: 0; transition: opacity .12s; pointer-events: none; }
.list:hover .list-actions { opacity: 1; pointer-events: auto; }

/* Posts UI in edit modal */
.edit-modal .modal-body {
    padding: 1rem;
    max-height: 70vh;
    overflow-y: auto;
}

.form-group label {
    display: none; /* Hide unnecessary labels for conciseness */
}

.form-group:not([for="editPostsInput"]) {
    margin-bottom: 0.5rem; /* Reduce space for non-posts groups */
}

.form-group[for="editCardDescription"] {
    display: none; /* Hide description as per previous optimizations */
}

.posts-list {
    margin-bottom: 1rem;
    padding: 0.5rem;
    border: 1px solid var(--gray-200);
    border-radius: 4px;
    max-height: 50vh; /* Increase max-height to emphasize posts */
    overflow-y: auto;
}

.posts-list:empty {
    display: none;
}

.post-item {
    border-bottom: 1px solid var(--gray-100);
    padding: 0.5rem 0;
    background: var(--gray-50);
    border-radius: var(--border-radius-sm);
    margin-bottom: 0.5rem;
    transition: var(--transition);
}

.post-item:hover {
    background: var(--gray-100);
}

.post-meta {
    display: flex;
    align-items: center;
    font-size: 0.8rem;
    color: var(--gray-500);
    /* padding: 0 0.5rem; */
}

/* inline meta + actions row */
.post-actions.has-meta {
    display: flex;
    align-items: center;
    justify-content: flex-start;
}
.post-actions-buttons {
    display: inline-flex;
    gap: 0.5rem;
    margin-left: auto;
}

.post-text {
    padding: 0.25rem 0.5rem;
    font-size: 0.95rem;
    line-height: 1.4;
    white-space: pre-line; /* Preserve line breaks for comments */
}

.post-edit-textarea {
    width: 100%;
    min-height: 80px;
    resize: none;
    overflow: hidden;
    border: 1px solid var(--gray-300);
    border-radius: 6px;
    padding: 0.5rem 0.625rem;
    font-size: 0.95rem;
    line-height: 1.4;
}

.post-actions {
    display: flex;
    gap: 0.5rem;
    justify-content: flex-end;
    padding: 0 0.5rem 0.25rem;
}

.post-actions button {
    font-size: 0.8rem;
    color: var(--primary-color);
    background: none;
    border: none;
    cursor: pointer;
    transition: var(--transition);
}

.post-actions button:hover {
    color: var(--primary-dark);
    text-decoration: underline;
}

#editPostsInput {
    min-height: 100px;
    width: 100%;
    border-radius: var(--border-radius);
    padding: 0.75rem;
    border: 1px solid var(--gray-300);
    transition: var(--transition);
    resize: none;
    overflow: hidden;
}

#editPostsInput:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.posts-actions {
    display: flex;
    justify-content: flex-end;
    margin-top: 0.5rem;
}

.posts-actions button {
    padding: 0.5rem 1rem;
    background: var(--primary-color);
    color: white;
    border: none;
    border-radius: var(--border-radius);
    cursor: pointer;
    transition: var(--transition);
}

.posts-actions button:hover {
    background: var(--primary-dark);
}

/* Reduce other elements to prioritize posts */
.form-group:not([for="editPostsInput"]) {
    margin-bottom: 0.5rem;
}

#editModal textarea {
    resize: none;
    overflow: hidden;
    min-height: 38px;
}

/* Field-specific baselines for better initial sizing */
#editCardTitle {
    min-height: 48px; /* ~2 lines for title */
}
#editCardDescription {
    min-height: 120px;
}
#editPostsInput {
    min-height: 120px;
}

.modal-header, .modal-footer {
    padding: 0.75rem 1rem;
}

.card-info {
    font-size: 0.875rem;
    color: var(--gray-500);
    display: flex;
    justify-content: space-between;
    margin-top: 0.5rem;
}


.badge-icon {
    /* background: #f3f4f6; */
    /* padding: 2px 6px; */
    /* border-radius: 12px; */
    font-size: 14px;
    color: #6b778c;
    display: inline-flex;
    align-items: center;
    gap: 0px;
    margin-bottom: -2px;
}


.badge.comments {
    /* background: #f3f4f6; */
    /* padding: 2px 6px; */
    /* border-radius: 12px; */
    font-size: 12px;
    color: #6b778c;
    display: inline-flex;
    align-items: center;
    gap: 0px;
    margin-bottom: -4px;

}
/* Remove min-height to make lists auto-height */
.column, .list {
    min-height: 0 !important;
}

/* Media query override */
@media (max-width: 768px) {
    .column, .list {
        min-height: 0 !important;
    }
}

/* Add list button minimal styling */
.add-list-open {
    background: transparent !important;
    border: none !important;
    color: #6b778c;
    font-size: 18px;
    cursor: pointer;
    width: 100%;
    height: 40px;
    /* display: flex; */
    /* align-items: center; */
    /* justify-content: center; */
}

.add-list-open:hover {
    background: rgba(9,30,66,.06) !important;
}

/* Project page navbar invites button match style */
#projectPage .project-header #invitesBtn {
    background: #f3f4f6;
    color: #374151;
    border: 1px solid var(--gray-300);
    border-radius: var(--border-radius);
    height: 36px;
    padding: 0 0.875rem;
    box-shadow: var(--shadow-sm);
    transition: var(--transition);
}
#projectPage .project-header #invitesBtn:hover {
    background: #e5e7eb;
    transform: translateY(-1px);
    box-shadow: var(--shadow);
    border-color: var(--gray-400);
}

@media (prefers-color-scheme: dark) {
    #projectPage .project-header #invitesBtn {
        background: #0f172a;
        color: var(--gray-700);
        border: 1px solid var(--gray-300);
        box-shadow: none;
    }
    #projectPage .project-header #invitesBtn:hover {
        transform: translateY(-1px);
        box-shadow: var(--shadow);
        border-color: var(--gray-400);
    }
}

/* Starred boards UI */
#projectPage #starredSection h2 .star-icon {
    color: #f59e0b;
    margin-right: 6px;
}
.board-action-btn.star-btn {
    color: #9ca3af;
}
.board-action-btn.star-btn.active {
    color: #f59e0b;
}
#starredBoards .empty-state {
    color: var(--gray-500);
    padding: 0.5rem 0;
}

#archivePage #archiveSearch {
    height: 32px;
    padding: 0 10px;
    border: 1px solid var(--gray-300);
    border-radius: 6px;
    background: #fff;
    color: #374151;
    width: 220px;
}
#archivePage #archiveSearch::placeholder { color: #9ca3af; }
#archivePage #archiveSearch:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(59,130,246,.12); }
@media (prefers-color-scheme: dark) {
    #archivePage #archiveSearch { background: #0b1220; color: var(--gray-700); border-color: var(--gray-300); }
}

/* Project chooser modal list alignment */
#projectChooserList { max-height: 360px; overflow: auto; border: 1px solid #e5e7eb; border-radius: 8px; }
#projectChooserList .board-switcher-item { cursor: pointer; }
#projectChooserList .board-switcher-item.active { background: #eff6ff; color: #1d4ed8; font-weight: 600; }

/* Reuse board-switcher-search input look in modal */
#projectChooserSearch { height: 36px; }

.archived-boards-wrap { margin-top: 12px; }
.archived-boards-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px; }
.archived-boards-header h3 { margin: 0; font-size: 1rem; color: #1f2937; }
.archived-tools { display: inline-flex; gap: 8px; align-items: center; }
#archivedBoardsSearch { height: 32px; padding: 0 10px; border: 1px solid var(--gray-300); border-radius: 6px; background: #fff; color: #374151; width: 220px; }
#archivedBoardsSearch::placeholder { color: #9ca3af; }
#archivedBoardsSearch:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(59,130,246,.12); }
.archived-boards-list.hidden { display: none; }
@media (prefers-color-scheme: dark) {
    #archivedBoardsSearch { background: #0b1220; color: var(--gray-700); border-color: var(--gray-300); }
}

.archived-boards-header { flex-wrap: wrap; gap: 8px; }
.archived-boards-header h3 { flex: 1 1 auto; }
.archived-tools { flex: 0 0 auto; margin-top: 4px; }

/* Separate archived boards section from above content */
.archived-boards-wrap { margin-top: 24px; padding-top: 12px; border-top: 1px solid var(--gray-200); }
@media (prefers-color-scheme: dark) {
    .archived-boards-wrap { border-top-color: var(--gray-300); }
}

/* Ensure archived section starts on a new full-width row in grid */
.quick-boards-grid .archived-boards-wrap { grid-column: 1 / -1; width: 100%; }

/* SECTION: Grids (Archived boards, Board-select tools) */
/* Archived boards: grid layout */
.archived-boards-list { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 12px; }
@media (min-width: 900px) { .archived-boards-list { grid-template-columns: repeat(3, minmax(0, 1fr)); } }
/* 固定最大为三栏，避免在更宽屏幕出现四栏 */
@media (min-width: 1200px) { .archived-boards-list { grid-template-columns: repeat(3, minmax(0, 1fr)); } }
.archived-boards-list .quick-board-card { min-height: 72px; }

.archived-left { display: inline-flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.archived-left #archivedBoardsSearch { height: 32px; padding: 0 10px; border: 1px solid var(--gray-300); border-radius: 6px; background: #fff; color: #374151; width: 220px; }
@media (prefers-color-scheme: dark) { .archived-left #archivedBoardsSearch { background: #0b1220; color: var(--gray-700); border-color: var(--gray-300); } }

/* Board loading placeholder */
#boardPage .board-loading {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 200px;
    color: var(--gray-500);
    font-size: 14px;
}

/* SECTION: Final header alignment overrides (stability) */
/* Ensure board page header aligns exactly with project/board-select headers */
#boardPage .header {
    margin-top: 0 !important;
    margin-bottom: 2rem !important;
    border-bottom: 2px solid #e5e7eb !important;
    padding: 0 !important; /* rely on inner container */
}
#boardPage .header > .container {
    max-width: 1400px !important;
    margin: 0 auto !important;
    /* header container gutter 2rem (same as project page header) */
    padding: 2rem 2rem 1rem !important;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

/* Match project page container width at desktop breakpoint */
@media (min-width: 1024px) {
  #boardPage .header > .container { max-width: 1200px !important; }
}
